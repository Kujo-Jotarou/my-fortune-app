import{r as n,j as e,c as Oe}from"./vendor-3DVn_WlK.js";import{initializeApp as Ke}from"firebase/app";import{getAuth as Je,signInWithCustomToken as Ue,signInAnonymously as Ye,onAuthStateChanged as Qe}from"firebase/auth";import{getFirestore as qe,doc as W,setDoc as ye,deleteDoc as Ge,getDoc as Ze,collection as we,query as et,orderBy as tt,onSnapshot as rt,addDoc as at}from"firebase/firestore";(function(){const A=document.createElement("link").relList;if(A&&A.supports&&A.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))$(m);new MutationObserver(m=>{for(const f of m)if(f.type==="childList")for(const h of f.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&$(h)}).observe(document,{childList:!0,subtree:!0});function x(m){const f={};return m.integrity&&(f.integrity=m.integrity),m.referrerPolicy&&(f.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?f.credentials="include":m.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function $(m){if(m.ep)return;m.ep=!0;const f=x(m);fetch(m.href,f)}})();function st(){const[O,A]=n.useState(null),[x,$]=n.useState(null),[m,f]=n.useState(null),[h,ae]=n.useState(null),[ve,se]=n.useState(!0),[I,K]=n.useState(""),[N,J]=n.useState(""),[M,U]=n.useState(""),[R,Y]=n.useState(""),[H,Q]=n.useState("A"),[L,q]=n.useState("ISTJ"),[g,je]=n.useState(""),[Ne,ne]=n.useState(!1),[S,F]=n.useState(""),[w,oe]=n.useState(!1),[ie,c]=n.useState(""),[le,de]=n.useState([]),[Se,G]=n.useState(!1),[ce,Z]=n.useState(null),[T,E]=n.useState([]),[D,me]=n.useState(!1),[_,ue]=n.useState(!1),[z,ee]=n.useState(0),Te=20,[te,he]=n.useState(!1),B=n.useRef(null),X=n.useRef(null),pe=n.useRef(null),Ce=[{value:"",label:"å ã„ãŸã„ã‚¸ãƒ£ãƒ³ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„"},{value:"ä»Šæ—¥ã®é‹å‹¢",label:"ä»Šæ—¥ã®é‹å‹¢"},{value:"æ‹æ„›é‹",label:"æ‹æ„›é‹"},{value:"ä»•äº‹é‹",label:"ä»•äº‹é‹"},{value:"é‡‘é‹",label:"é‡‘é‹"},{value:"å¥åº·é‹",label:"å¥åº·é‹"},{value:"å¯¾äººé–¢ä¿‚é‹",label:"å¯¾äººé–¢ä¿‚é‹"},{value:"è‡ªå·±æˆé•·",label:"è‡ªå·±æˆé•·"}],Ie=["ISTJ","ISFJ","INFJ","INTJ","ISTP","ISFP","INFP","INTP","ESTP","ESFP","ENFP","ENTP","ESTJ","ESFJ","ENFJ","ENTJ"],_e=["A","B","O","AB"],ke=[{name:"0 æ„šè€… (The Fool)"},{name:"I é­”è¡“å¸« (The Magician)"},{name:"II å¥³æ•™çš‡ (The High Priestess)"},{name:"III å¥³å¸ (The Empress)"},{name:"IV çš‡å¸ (The Emperor)"},{name:"V æ³•ç‹ (The Hierophant)"},{name:"VI æ‹äºº (The Lovers)"},{name:"VII æˆ¦è»Š (The Chariot)"},{name:"VIII åŠ› (Strength)"},{name:"IX éš è€… (The Hermit)"},{name:"X é‹å‘½ã®è¼ª (Wheel of Fortune)"},{name:"XI æ­£ç¾© (Justice)"},{name:"XII åŠã‚‹ã•ã‚ŒãŸç”· (The Hanged Man)"},{name:"XIII æ­»ç¥ (Death)"},{name:"XIV ç¯€åˆ¶ (Temperance)"},{name:"XV æ‚ªé­” (The Devil)"},{name:"XVI å¡” (The Tower)"},{name:"XVII æ˜Ÿ (The Star)"},{name:"XVIII æœˆ (The Moon)"},{name:"XIX å¤ªé™½ (The Sun)"},{name:"XX å¯©åˆ¤ (Judgement)"},{name:"XXI ä¸–ç•Œ (The World)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®ã‚¨ãƒ¼ã‚¹ (Ace of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®2 (Two of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®3 (Three of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®4 (Four of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®5 (Five of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®6 (Six of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®7 (Seven of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®8 (Eight of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®9 (Nine of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®10 (Ten of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®ãƒšã‚¤ã‚¸ (Page of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®ãƒŠã‚¤ãƒˆ (Knight of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®ã‚¯ã‚¤ãƒ¼ãƒ³ (Queen of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®ã‚­ãƒ³ã‚° (King of Wands)"},{name:"ã‚«ãƒƒãƒ—ã®ã‚¨ãƒ¼ã‚¹ (Ace of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®2 (Two of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®3 (Three of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®4 (Four of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®5 (Five of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®6 (Six of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®7 (Seven of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®8 (Eight of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®9 (Nine of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®10 (Ten of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®ãƒšã‚¤ã‚¸ (Page of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®ãƒŠã‚¤ãƒˆ (Knight of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®ã‚¯ã‚¤ãƒ¼ãƒ³ (Queen of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®ã‚­ãƒ³ã‚° (King of Cups)"},{name:"ã‚½ãƒ¼ãƒ‰ã®ã‚¨ãƒ¼ã‚¹ (Ace of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®2 (Two of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®3 (Three of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®4 (Four of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®5 (Five of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®6 (Six of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®7 (Seven of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®8 (Eight of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®9 (Nine of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®10 (Ten of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®ãƒšã‚¤ã‚¸ (Page of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®ãƒŠã‚¤ãƒˆ (Knight of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®ã‚¯ã‚¤ãƒ¼ãƒ³ (Queen of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®ã‚­ãƒ³ã‚° (King of Swords)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®ã‚¨ãƒ¼ã‚¹ (Ace of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®2 (Two of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®3 (Three of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®4 (Four of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®5 (Five of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®6 (Six of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®7 (Seven of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®8 (Eight of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®9 (Nine of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®10 (Ten of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®ãƒšã‚¤ã‚¸ (Page of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®ãƒŠã‚¤ãƒˆ (Knight of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®ã‚¯ã‚¤ãƒ¼ãƒ³ (Queen of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®ã‚­ãƒ³ã‚° (King of Pentacles)"}];n.useEffect(()=>{(async()=>{try{if(!O){const a=typeof __firebase_config<"u"?JSON.parse(__firebase_config):{},r=Ke(a),s=Je(r),i=qe(r);A(r),f(s),$(i),typeof __initial_auth_token<"u"&&__initial_auth_token?await Ue(s,__initial_auth_token):await Ye(s),Qe(s,o=>{o?(ae(o.uid),console.log("Firebase user ID:",o.uid),Ae(i,o.uid),De(i,o.uid)):(ae(null),K(""),J(""),U(""),Y(""),Q("A"),q("ISTJ"),de([]),console.log("No user signed in.")),se(!1)})}}catch(a){console.error("Firebase initialization or authentication failed:",a),c("Firebaseã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸã€‚"),se(!1)}})()},[O]);const Ae=async(t,a)=>{if(!t||!a)return;const r=W(t,`artifacts/${typeof __app_id<"u"?__app_id:"default-app-id"}/users/${a}/user_data/profile`);try{const s=await Ze(r);if(s.exists()){const i=s.data();K(i.name||""),J(i.birthDate?new Date(i.birthDate.toDate()).toISOString().split("T")[0]:""),U(i.birthTime||""),Y(i.birthPlace||""),Q(i.bloodType||"A"),q(i.mbtiType||"ISTJ"),he(i.hasSharedForAdSkip||!1)}}catch(s){console.error("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ:",s),c("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}},Fe=async()=>{if(!x||!h){c("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒèªè¨¼ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚");return}const t=W(x,`artifacts/${typeof __app_id<"u"?__app_id:"default-app-id"}/users/${h}/user_data/profile`);try{await ye(t,{name:I,birthDate:N?new Date(N):null,birthTime:M,birthPlace:R,bloodType:H,mbtiType:L,updatedAt:new Date,hasSharedForAdSkip:te},{merge:!0}),console.log("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œã¾ã—ãŸï¼"),c(""),ne(!0),setTimeout(()=>ne(!1),3e3)}catch(a){console.error("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ:",a),c("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}},fe=async t=>{if(!x||!h){console.error("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒèªè¨¼ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚åºƒå‘Šã‚¹ã‚­ãƒƒãƒ—ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°ã§ãã¾ã›ã‚“ã€‚");return}const a=W(x,`artifacts/${typeof __app_id<"u"?__app_id:"default-app-id"}/users/${h}/user_data/profile`);try{await ye(a,{hasSharedForAdSkip:t},{merge:!0}),he(t),console.log("åºƒå‘Šã‚¹ã‚­ãƒƒãƒ—ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸ:",t)}catch(r){console.error("åºƒå‘Šã‚¹ã‚­ãƒƒãƒ—ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ:",r)}},De=(t,a)=>{if(!t||!a)return;const r=we(t,`artifacts/${typeof __app_id<"u"?__app_id:"default-app-id"}/users/${a}/fortune_history`),s=et(r,tt("timestamp","desc"));return rt(s,o=>{const u=o.docs.map(p=>({id:p.id,...p.data()}));de(u)},o=>{console.error("å ã„å±¥æ­´ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ:",o),c("å ã„å±¥æ­´ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")})},Pe=async(t,a,r,s=[])=>{if(!x||!h){c("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒèªè¨¼ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚");return}const i=we(x,`artifacts/${typeof __app_id<"u"?__app_id:"default-app-id"}/users/${h}/fortune_history`);try{await at(i,{fortuneCategory:a,inputData:r,fortuneResult:t,tarotCards:s.map(o=>({name:o.name,position:o.position,isReversed:o.isReversed})),timestamp:new Date}),console.log("å ã„çµæœãŒå±¥æ­´ã«ä¿å­˜ã•ã‚Œã¾ã—ãŸï¼")}catch(o){console.error("å ã„çµæœã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ:",o),c("å ã„çµæœã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}},$e=async()=>{if(!x||!h||!ce){c("å‰Šé™¤ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚");return}try{await Ge(W(x,`artifacts/${typeof __app_id<"u"?__app_id:"default-app-id"}/users/${h}/fortune_history`,ce.id)),console.log("å ã„å±¥æ­´ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸï¼"),c("")}catch(t){console.error("å ã„å±¥æ­´ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ:",t),c("å ã„å±¥æ­´ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}finally{G(!1),Z(null)}},Me=t=>{Z(t),G(!0)},Re=()=>{G(!1),Z(null)},He=t=>{if(!t)return null;let a=new Date(t),r=a.getFullYear(),s=a.getMonth()+1,i=a.getDate();const o=b=>{for(;b>9&&b!==11&&b!==22&&b!==33;)b=String(b).split("").reduce((C,V)=>C+parseInt(V),0);return b},u=o(r),p=o(s),y=o(i);return o(u+p+y)},Le=()=>{me(!0),E([]),F("");const t=[...ke].sort(()=>.5-Math.random()),a=[{card:t[0],position:"éå» (Past)"},{card:t[1],position:"ç¾åœ¨ (Present)"},{card:t[2],position:"æœªæ¥ (Future)"}];let r=[];a.forEach((s,i)=>{setTimeout(()=>{const o=Math.random()<.5;r.push({name:s.card.name,position:s.position,isReversed:o}),E([...r]),i===a.length-1&&me(!1)},500*(i+1))})},Ee=async(t,a)=>{const r={name:I,birthDate:N,birthTime:M||"ä¸æ˜",birthPlace:R||"ä¸æ˜",bloodType:H,mbtiType:L,fortuneCategory:t},s=He(r.birthDate);let u=`å¤ªé™½æ˜Ÿåº§: ${(P=>{const ge=new Date(P),l=ge.getMonth()+1,d=ge.getDate();return l===3&&d>=21||l===4&&d<=19?"ç‰¡ç¾Šåº§ (Aries)":l===4&&d>=20||l===5&&d<=20?"ç‰¡ç‰›åº§ (Taurus)":l===5&&d>=21||l===6&&d<=20?"åŒå­åº§ (Gemini)":l===6&&d>=21||l===7&&d<=22?"èŸ¹åº§ (Cancer)":l===7&&d>=23||l===8&&d<=22?"ç…å­åº§ (Leo)":l===8&&d>=23||l===9&&d<=22?"ä¹™å¥³åº§ (Virgo)":l===9&&d>=23||l===10&&d<=22?"å¤©ç§¤åº§ (Libra)":l===10&&d>=23||l===11&&d<=21?"è åº§ (Scorpio)":l===11&&d>=22||l===12&&d<=21?"å°„æ‰‹åº§ (Sagittarius)":l===12&&d>=22||l===1&&d<=19?"å±±ç¾Šåº§ (Capricorn)":l===1&&d>=20||l===2&&d<=18?"æ°´ç“¶åº§ (Aquarius)":l===2&&d>=19||l===3&&d<=20?"é­šåº§ (Pisces)":"ä¸æ˜"})(r.birthDate)}ã€‚
`;u+=`å‡ºç”Ÿæ™‚åˆ»: ${r.birthTime!=="ä¸æ˜"?r.birthTime:"ä¸æ˜"}ã€‚å‡ºç”Ÿåœ°: ${r.birthPlace!==""?r.birthPlace:"ä¸æ˜"}ã€‚
`,u+=`ã“ã‚Œã‚‰ã®æƒ…å ±ï¼ˆç‰¹ã«æ­£ç¢ºãªå‡ºç”Ÿæ™‚åˆ»ã¨å‡ºç”Ÿåœ°ãŒä¸æ˜ãªå ´åˆã¯ã€å¤ªé™½æ˜Ÿåº§ã¨å¿ƒç†å­¦çš„ç‰¹æ€§ã‚’é‡è¦–ï¼‰ã«åŸºã¥ãã€æœˆæ˜Ÿåº§ã€ã‚¢ã‚»ãƒ³ãƒ€ãƒ³ãƒˆã€ä¸»è¦ãªæƒ‘æ˜Ÿï¼ˆæ°´æ˜Ÿã€é‡‘æ˜Ÿã€ç«æ˜Ÿãªã©ï¼‰ã®ã‚µã‚¤ãƒ³ã‚„ã€ãã‚Œã‚‰ãŒã©ã®ãƒã‚¦ã‚¹ã«ã‚ã‚‹ã‹ï¼ˆä¸€èˆ¬çš„ãªè§£é‡ˆã§è‰¯ã„ï¼‰ã€ãã—ã¦ä¸»è¦ãªã‚¢ã‚¹ãƒšã‚¯ãƒˆï¼ˆä¾‹: ã‚³ãƒ³ã‚¸ãƒ£ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ã€ã‚ªãƒã‚¸ã‚·ãƒ§ãƒ³ã€ã‚¹ã‚¯ã‚¨ã‚¢ã€ãƒˆãƒ©ã‚¤ãƒ³ã€ã‚»ã‚¯ã‚¹ã‚¿ã‚¤ãƒ«ï¼‰ã®å¯èƒ½æ€§ã‚’å æ˜Ÿè¡“ã®çŸ¥è­˜ã‚’ç·å‹•å“¡ã—ã¦æƒ³åƒã—ã€ã‚ãªãŸã®æ´å¯Ÿã«å«ã‚ã¦ãã ã•ã„ã€‚
`,u+="å…·ä½“çš„ã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®MBTIã‚¿ã‚¤ãƒ—ã‚„è¡€æ¶²å‹ã¨ã®é–¢é€£æ€§ã‚‚è¸ã¾ãˆã€è¡Œå‹•å‚¾å‘ã‚„å†…é¢ä¸–ç•Œã‚’æ·±ãèª­ã¿è§£ã„ã¦ãã ã•ã„ã€‚";let p="";a.length>0&&(p=`
**å¼•ã‹ã‚ŒãŸã‚¿ãƒ­ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã¨ãã®ãƒã‚¸ã‚·ãƒ§ãƒ³:**
`,a.forEach(P=>{p+=`  - ${P.position}: ${P.name} (${P.isReversed?"é€†ä½ç½®":"æ­£ä½ç½®"})
`}),p+=`
ã“ã‚Œã‚‰ã®ã‚«ãƒ¼ãƒ‰ã®æ­£ä½ç½®ãƒ»é€†ä½ç½®ã®æ„å‘³ã¨ã€ãã‚Œã‚‰ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¾çŠ¶ã€èª²é¡Œã€æœªæ¥ã«ã©ã†å½±éŸ¿ã™ã‚‹ã‹ã‚’æ·±ãèª­ã¿è§£ã„ã¦ãã ã•ã„ã€‚ç‰¹ã«ã€ã‚¿ãƒ­ãƒƒãƒˆã¯æ½œåœ¨æ„è­˜ã‚„çŠ¶æ³ã®æµã‚Œã‚’ç¤ºã™ãŸã‚ã€ã“ã®ç‚¹ã‚‚è€ƒæ…®ã«å…¥ã‚Œã¦ãã ã•ã„ã€‚
`);let y=`ã‚ãªãŸã¯çµŒé¨“è±Šå¯Œãªãƒ—ãƒ­ã®å ã„å¸«ã§ã™ã€‚ä»¥ä¸‹ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã€è©³ç´°ãªå æ˜Ÿè¡“ã®æ¦‚å¿µã€æ•°ç§˜è¡“ã®ãƒ‡ãƒ¼ã‚¿ã€MBTIã‚¿ã‚¤ãƒ—ã€è¡€æ¶²å‹${a.length>0?"ã€ãã—ã¦å¼•ã‹ã‚ŒãŸã‚¿ãƒ­ãƒƒãƒˆã‚«ãƒ¼ãƒ‰":""}ã«åŸºã¥ãã€${r.fortuneCategory}ã«ã¤ã„ã¦ã€å…·ä½“çš„ã§ç¤ºå”†ã«å¯Œã‚€ã€å¿ƒç†çµ±è¨ˆã«åŸºã¥ã„ãŸæ·±ã¿ã®ã‚ã‚‹å ã„çµæœã‚’æ—¥æœ¬èªã§ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚å½“ãŸã‚Šéšœã‚Šã®ãªã„è¨€è‘‰ã‚„å®šå‹æ–‡ã¯é¿ã‘ã€æœ¬æ°—ã§å½“ã¦ã«è¡Œãå†…å®¹ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è‡ªå·±ç†è§£ã¨æˆé•·ã‚’ä¿ƒã™ãƒˆãƒ¼ãƒ³ã§è¨˜è¿°ã—ã¦ãã ã•ã„ã€‚

å ã„çµæœã¯Markdownå½¢å¼ã§ã€å¿…ãšå°è¦‹å‡ºã—ï¼ˆ###ï¼‰ã¨æ®µè½ï¼ˆç©ºè¡Œã§åŒºåˆ‡ã‚‹ï¼‰ã‚’ä½¿ç”¨ã—ã¦ã€éå¸¸ã«èª­ã¿ã‚„ã™ãæ§‹æˆã—ã¦ãã ã•ã„ã€‚
**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«:**
**è¡€æ¶²å‹:** ${r.bloodType}å‹
**MBTIã‚¿ã‚¤ãƒ—:** ${r.mbtiType}

ç‰¹ã«${r.fortuneCategory}ã«é–¢ã™ã‚‹çµæœã‚’å¼·èª¿ã—ã€å¿…è¦ã«å¿œã˜ã¦ãã®ä»–ã®é–¢é€£ã™ã‚‹é‹å‹¢ï¼ˆä¾‹ï¼šç·åˆé‹ã€æ‹æ„›é‹ãªã©ï¼‰ã«ã¤ã„ã¦ã‚‚è¨€åŠã—ã¦ãã ã•ã„ã€‚

---
ãƒ¦ãƒ¼ã‚¶ãƒ¼å: ${r.name}
ç”Ÿå¹´æœˆæ—¥: ${r.birthDate}${r.birthTime!=="ä¸æ˜"?` (${r.birthTime}ç”Ÿ)`:""}
å‡ºç”Ÿåœ°: ${r.birthPlace}

å æ˜Ÿè¡“ãƒ‡ãƒ¼ã‚¿:
  ${u}

æ•°ç§˜è¡“ãƒ‡ãƒ¼ã‚¿:
  ãƒ©ã‚¤ãƒ•ãƒ‘ã‚¹ãƒŠãƒ³ãƒãƒ¼: ${s!==null?s:"è¨ˆç®—ä¸èƒ½"}
  ï¼ˆåå‰ã‹ã‚‰ã®é‹å‘½æ•°ãªã©ã€ã‚ˆã‚Šè©³ç´°ãªæ•°ç§˜è¡“ãƒ‡ãƒ¼ã‚¿ãŒã“ã“ã«å…¥ã‚Šã¾ã™ã€‚ï¼‰
${p}
---

### ${r.fortuneCategory}ã®é‹å‹¢
`;y+=`

### ã¾ã¨ã‚
ã“ã®å ã„çµæœã®æœ€ã‚‚é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã‚’2ã€œ3æ–‡ã§ç°¡æ½”ã«è¦ç´„ã—ã¦ãã ã•ã„ã€‚`;let j=[];j.push({role:"user",parts:[{text:y}]});const k=(await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:j})})).json();if(k.candidates&&k.candidates.length>0&&k.candidates[0].content&&k.candidates[0].content.parts&&k.candidates[0].content.parts.length>0)return k.candidates[0].content.parts[0].text;throw new Error("AIç”Ÿæˆçµæœã®æ§‹é€ ãŒäºˆæœŸã›ã¬ã‚‚ã®ã§ã—ãŸã€‚")},ze=async()=>{if(!I||!N||!g){c("åå‰ã€ç”Ÿå¹´æœˆæ—¥ã€å ã„ã®ã‚¸ãƒ£ãƒ³ãƒ«ã¯å¿…é ˆã§ã™ã€‚");return}if(!x||!h){c("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒèªè¨¼ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚");return}oe(!0),c(""),F("");try{const t=await Ee(g,T);F(t),Pe(t,g,{name:I,birthDate:N,birthTime:M,birthPlace:R,bloodType:H,mbtiType:L},T),X.current&&X.current.scrollIntoView({behavior:"smooth"})}catch(t){console.error("å ã„çµæœã®ç”Ÿæˆä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:",t),c("å ã„çµæœã®ç”Ÿæˆä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚")}finally{oe(!1)}},xe=()=>{F(""),E([]),c(""),ue(!1),ee(0),B.current&&B.current.scrollIntoView({behavior:"smooth"})},Be=()=>{if(te){console.log("åºƒå‘Šã‚¹ã‚­ãƒƒãƒ—æ¨©é™ã‚ã‚Šã€åºƒå‘Šã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚"),xe();return}ue(!0),ee(Te)};n.useEffect(()=>{let t;return _&&z>0?t=setTimeout(()=>{ee(a=>a-1)},1e3):_&&z===0&&xe(),()=>clearTimeout(t)},[_,z,te]);const Xe=t=>{const a="### ã¾ã¨ã‚",r=t.indexOf(a);if(r!==-1){let s=t.substring(r+a.length).trim();const i=s.indexOf("###",1);i!==-1&&(s=s.substring(0,i).trim());let u=s.split(`
`).filter(p=>p.trim()!=="").slice(0,2).join(" ").trim();return u=u.replace(/#+\s*/g,"").replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*\*/g,"$1"),u.length>80&&(u=u.substring(0,80)+"..."),u}return""},v=t=>{if(!S){c("ã‚·ã‚§ã‚¢ã™ã‚‹å ã„çµæœãŒã‚ã‚Šã¾ã›ã‚“ã€‚");return}const a=Xe(S),r=`é©šæ„•ã®çš„ä¸­ç‡ï¼ç§ã®AIå ã„ã¯ã‚³ãƒ¬ğŸ”®âœ¨

ã‚¸ãƒ£ãƒ³ãƒ«: ${g}`,s=a?`
ã€ã¾ã¨ã‚ã€‘${a}`:"",i="#AIå ã„ #æœ¬æ ¼å ã„";let o=`${r}${s}
${i}`;const p=280-23;o.length>p&&(o=o.substring(0,p-3)+"...");const y=window.location.href;let j="";switch(t){case"twitter":j=`https://twitter.com/intent/tweet?text=${encodeURIComponent(o)}&url=${encodeURIComponent(y)}`;break;case"facebook":j=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(y)}&quote=${encodeURIComponent(r+s)}`;break;case"line":j=`https://line.me/R/share?text=${encodeURIComponent(r+s+`
`+y+`
`+tags)}`;break;case"copy":const b=`ğŸ”®âœ¨ å­¦è¡“çš„AIå ã„çµæœ âœ¨ğŸ”®

ã‚¸ãƒ£ãƒ³ãƒ«: ${g}

${S}

${i}
${y}`,C=document.createElement("textarea");C.value=b,document.body.appendChild(C),C.select();try{document.execCommand("copy"),alert("å ã„çµæœã®ãƒªãƒ³ã‚¯ã¨å†…å®¹ãŒã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã—ãŸï¼")}catch(V){console.error("Failed to copy: ",V),alert("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}document.body.removeChild(C),_&&fe(!0);return;default:return}window.open(j,"_blank"),_&&fe(!0)},re=t=>{t.current&&t.current.scrollIntoView({behavior:"smooth"})},be=I&&N&&g,Ve=be&&!w&&T.length===0&&!D&&S==="",We=be&&!D&&!w&&T.length>0&&S==="";return ve?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full text-purple-400",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"text-xl font-semibold text-gray-300 mt-4",children:"ã‚¢ãƒ—ãƒªã‚’åˆæœŸåŒ–ä¸­..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-purple-950 p-4 sm:p-8 font-inter",children:[e.jsx("style",{children:`
                @keyframes fade-in {
                    from { opacity: 0; transform: translateY(-10px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                @keyframes slide-down {
                    from { opacity: 0; transform: translateY(-20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                @keyframes fade-in-up {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                .animate-fade-in { animation: fade-in 0.8s ease-out forwards; }
                .animate-slide-down { animation: slide-down 0.5s ease-out forwards; }
                .animate-fade-in-up { animation: fade-in-up 0.6s ease-out forwards; }

                /* Spinner styles */
                .spinner-border {
                    border-top-color: currentColor;
                    border-right-color: transparent;
                    border-bottom-color: transparent;
                    border-left-color: currentColor;
                }
                .tarot-card {
                    width: 80px; /* Adjust size as needed */
                    height: 120px; /* Adjust size as needed */
                    border: 2px solid #a78bfa; /* Purple border */
                    border-radius: 8px;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    background-color: #2d2d3a;
                    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
                    flex-shrink: 0; /* Prevent shrinking in flex container */
                    opacity: 0; /* Hidden by default for animation */
                    transform: translateY(20px) rotateX(90deg); /* Start off-screen and rotated */
                    animation: card-reveal 0.5s ease-out forwards; /* Apply reveal animation */
                    transition: transform 0.3s ease-in-out; /* Smooth transition for reversal */
                }
                .tarot-card.reversed { /* Apply to the whole card container for reversal */
                    transform: rotate(180deg);
                }
                /* Ensure history cards also respect reversal */
                .tarot-card-history { /* Base style for history cards to not inherit reveal animation */
                    width: 60px;
                    height: 90px;
                    border: 2px solid #a78bfa;
                    border-radius: 8px;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    background-color: #2d2d3a;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
                    flex-shrink: 0;
                    opacity: 1; /* Always visible */
                    transform: none; /* No initial transform */
                    transition: transform 0.3s ease-in-out; /* Smooth transition for reversal */
                }
                .tarot-card-history.reversed {
                    transform: rotate(180deg);
                }

                .tarot-card .card-name-display { /* Specific class for the card name inside */
                    text-align: center;
                    font-size: 0.8rem; /* Smaller font for better fit */
                    line-height: 1.1;
                    padding: 0 2px; /* Small padding */
                    word-break: break-word; /* Allow breaking words */
                    white-space: normal; /* Allow normal wrapping */
                }
                .tarot-card-history .card-name-display {
                    font-size: 0.6rem; /* Even smaller for history */
                    line-height: 1;
                }
                
                @keyframes card-reveal {
                    0% {
                        opacity: 0;
                        transform: translateY(20px) rotateX(90deg);
                    }
                    100% {
                        opacity: 1;
                        transform: translateY(0) rotateX(0deg);
                    }
                }

                /* New loading animation styles - Crystal Ball */
                .loading-overlay {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background-color: rgba(0, 0, 0, 0.9); /* Darker overlay */
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    z-index: 9999;
                    color: white;
                    font-size: 1.5rem;
                }

                .crystal-ball {
                    width: 100px;
                    height: 100px;
                    background: radial-gradient(circle at 30% 30%, #a78bfa, #6d28d9); /* Inner glow */
                    border-radius: 50%;
                    position: relative;
                    box-shadow: 0 0 30px #d8b4fe, inset 0 0 15px #e9d5ff; /* Outer glow and inner light */
                    animation: pulse-glow 2s infinite alternate ease-in-out;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 3rem;
                    margin-bottom: 2rem;
                }

                .crystal-ball::before {
                    content: '';
                    position: absolute;
                    top: 10%;
                    left: 10%;
                    width: 80%;
                    height: 80%;
                    border-radius: 50%;
                    background: radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0) 70%);
                    filter: blur(5px);
                }

                @keyframes pulse-glow {
                    0% {
                        box-shadow: 0 0 30px #d8b4fe, inset 0 0 15px #e9d5ff;
                        transform: scale(1);
                    }
                    100% {
                        box-shadow: 0 0 45px #d8b4fe, inset 0 0 20px #e9d5ff;
                        transform: scale(1.05);
                    }
                }
            `}),w&&e.jsxs("div",{className:"loading-overlay",children:[e.jsx("div",{className:"crystal-ball",children:e.jsx("span",{role:"img","aria-label":"crystal ball",children:"ğŸ”®"})}),e.jsx("p",{className:"text-xl font-semibold text-gray-300 loading-text",children:"é‹å‘½ã®å°ãã‚’ç”Ÿæˆä¸­..."}),e.jsx("p",{className:"text-md text-gray-400 mt-2 loading-text",children:"AIãŒã‚ãªãŸã®ãƒ‡ãƒ¼ã‚¿ã‚’æ·±ãèª­ã¿è§£ã„ã¦ã„ã¾ã™ã€‚"})]}),_&&e.jsx("div",{className:"loading-overlay",children:e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gray-900 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"åºƒå‘Šè¡¨ç¤ºä¸­"}),e.jsxs("p",{className:"text-xl mb-8",children:["æ¬¡ã®å ã„ã¾ã§ã‚ã¨ ",z," ç§’..."]}),e.jsxs("div",{className:"my-4 flex justify-center items-center",style:{width:"320px",height:"280px",overflow:"hidden"},children:[e.jsxs("a",{href:"[https://px.a8.net/svt/ejp?a8mat=457HK0+6TW1MA+22QA+I47XT](https://px.a8.net/svt/ejp?a8mat=457HK0+6TW1MA+22QA+I47XT)",rel:"nofollow",target:"_blank",children:[" ",e.jsx("img",{border:"0",width:"320",height:"280",alt:"ç¾å®¹ç³»åºƒå‘Š",src:"[https://www28.a8.net/svt/bgt?aid=250612128413&wid=001&eno=01&mid=s00000009685003043000&mc=1](https://www28.a8.net/svt/bgt?aid=250612128413&wid=001&eno=01&mid=s00000009685003043000&mc=1)"})]}),e.jsx("img",{border:"0",width:"1",height:"1",src:"[https://www12.a8.net/0.gif?a8mat=457HK0+6TW1MA+22QA+I47XT](https://www12.a8.net/0.gif?a8mat=457HK0+6TW1MA+22QA+I47XT)",alt:"ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ãƒ”ã‚¯ã‚»ãƒ«",style:{display:"none"}})," "]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"SNSã§ã‚·ã‚§ã‚¢ã™ã‚‹ã¨ã€åºƒå‘Šã‚’ã‚¹ã‚­ãƒƒãƒ—ã§ãã¾ã™ï¼"}),e.jsxs("div",{className:"text-center mt-8 space-x-1 sm:space-x-2 flex flex-wrap justify-center gap-y-2",children:[" ",e.jsxs("button",{onClick:()=>v("twitter"),className:"bg-blue-400 text-white p-2 rounded-md font-semibold text-sm hover:bg-blue-500 transition duration-300 shadow-md flex items-center justify-center min-w-[100px]",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.14L9.35 12.98 2.464 22H0l8.09-10.702L0 2.25h8.322L12.5 7.398 18.244 2.25zM17.272 20l-1.895-2.656-7.147-9.99H5.503L13.181 20H17.272z"})}),"X (Twitter)"]}),e.jsxs("button",{onClick:()=>v("facebook"),className:"bg-blue-700 text-white p-2 rounded-md font-semibold text-sm hover:bg-blue-800 transition duration-300 shadow-md flex items-center justify-center min-w-[100px]",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M14 13.5h2.5l1-4H14v-2c0-1.03 0-2 .5-2.5h2V7.472s-1.5-.164-2.75-.164c-2.68 0-4.5 1.6-4.5 4.75V13.5H6v4h3.5v6.5h4V17.5h3.5l1-4H14z"})}),"Facebook"]}),e.jsxs("button",{onClick:()=>v("line"),className:"bg-green-500 text-white p-2 rounded-md font-semibold text-sm hover:bg-green-600 transition duration-300 shadow-md flex items-center justify-center min-w-[100px]",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M11.996 2C6.475 2 2 6.477 2 12s4.475 10 9.996 10C17.525 22 22 17.523 22 12S17.525 2 11.996 2zM12 20c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8zM14.28 9.544l-2.072 2.072L9.136 9.544a.75.75 0 00-1.06 1.06l2.072 2.072-2.072 2.072a.75.75 0 001.06 1.06l2.072-2.072 2.072 2.072a.75.75 0 001.06-1.06l-2.072-2.072 2.072-2.072a.75.75 0 00-1.06-1.06z",clipRule:"evenodd"})}),"LINE"]}),e.jsxs("button",{onClick:()=>v("copy"),className:"bg-gray-600 text-white p-2 rounded-md font-semibold text-sm hover:bg-gray-700 transition duration-300 shadow-md flex items-center justify-center min-w-[100px]",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M7 7H5c-1.103 0-2 .897-2 2v10c0 1.103.897 2 2 2h10c1.103 0 2-.897 2-2v-2h2v-8c0-1.103-.897-2-2-2h-8zm10 2h-6V7h6v2zm-2 4h-6V9h6v4z",clipRule:"evenodd"})}),"ã‚³ãƒ”ãƒ¼"]})]})]})}),e.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-gray-900 bg-opacity-80 p-3 z-40 shadow-lg flex justify-center space-x-4 rounded-b-lg",children:[e.jsx("button",{onClick:()=>re(B),className:"text-gray-200 hover:text-purple-400 font-semibold text-sm sm:text-base px-3 py-2 rounded-md transition duration-200",children:"å…¥åŠ›"}),e.jsx("button",{onClick:()=>re(X),className:"text-gray-200 hover:text-purple-400 font-semibold text-sm sm:text-base px-3 py-2 rounded-md transition duration-200",children:"çµæœ"}),e.jsx("button",{onClick:()=>re(pe),className:"text-gray-200 hover:text-purple-400 font-semibold text-sm sm:text-base px-3 py-2 rounded-md transition duration-200",children:"å±¥æ­´"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto bg-gray-800 rounded-xl shadow-lg p-6 sm:p-10 border border-purple-700 mt-16",children:[" ",e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"h-20 w-20 mx-auto bg-purple-600 rounded-full flex items-center justify-center mb-4 shadow-xl",children:e.jsx("span",{className:"text-white text-3xl font-bold",children:"ğŸ”®"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-purple-300 mb-6 animate-fade-in",children:"å­¦è¡“çš„AIå ã„ï¼šã‚ãªãŸã®é‹å‘½ã‚’æ·±ãèª­ã¿è§£ã"})]}),ie&&e.jsxs("div",{className:"bg-red-900 border border-red-700 text-red-300 px-4 py-3 rounded-md mb-6 animate-slide-down",role:"alert",children:[e.jsx("p",{className:"font-bold",children:"ã‚¨ãƒ©ãƒ¼:"}),e.jsx("p",{children:ie})]}),e.jsxs("div",{className:"mb-8 p-4 bg-yellow-900 border border-yellow-700 text-yellow-200 rounded-md text-sm",children:[e.jsx("p",{className:"font-semibold mb-2",children:"ã€ã“ã‚Œã¾ã§ã«ãªã„ç©¶æ¥µã®å ã„ä½“é¨“ã¸ï¼ã€‘"}),e.jsx("p",{children:"ã“ã®ã‚¢ãƒ—ãƒªã¯ã€**å¿ƒç†çµ±è¨ˆå­¦**ã€**ä¼çµ±çš„ãªå è¡“ï¼ˆå æ˜Ÿè¡“ã€æ•°ç§˜è¡“ã€ã‚¿ãƒ­ãƒƒãƒˆï¼‰**ã€ãã—ã¦**æœ€å…ˆç«¯ã®AIæŠ€è¡“**ã‚’ç·åˆçš„ã«çµ„ã¿åˆã‚ã›ãŸã€ã¾ã•ã«ã€Œæœ€å¼·ã€ã®å ã„ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã‚ãªãŸã®åå‰ã€ç”Ÿå¹´æœˆæ—¥ã€è¡€æ¶²å‹ã€MBTIã‚¿ã‚¤ãƒ—ã¨ã„ã£ãŸãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã€AIãŒæ·±å±¤ã‚’åˆ†æã—ã€å½“ãŸã‚Šéšœã‚Šã®ãªã„è¨€è‘‰ã§ã¯ãªã„ã€æœ¬å½“ã«ã‚ãªãŸã«éŸ¿ãç¤ºå”†ã«å¯Œã‚“ã æ´å¯Ÿã‚’ãŠå±Šã‘ã—ã¾ã™ã€‚ã‚ãªãŸã®è‡ªå·±ç†è§£ã‚’æ·±ã‚ã€æœªæ¥ã‚’åˆ‡ã‚Šé–‹ããŸã‚ã®ç¾…é‡ç›¤ã¨ã—ã¦ã”æ´»ç”¨ãã ã•ã„ã€‚MBTIã‚¿ã‚¤ãƒ—ã¯è‡ªå·±ç†è§£ã«éå¸¸ã«æœ‰ç”¨ã§ã™ãŒã€ç§‘å­¦çš„å¦¥å½“æ€§ã«ã¯é™å®šçš„ãªå´é¢ãŒã‚ã‚‹ã“ã¨ã‚’ã”ç†è§£ã®ä¸Šã€ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚"})]}),e.jsxs("div",{ref:B,className:"space-y-6 mb-8 pt-4",children:[" ",e.jsx("h2",{className:"text-2xl font-bold text-gray-200 mb-4 border-b border-gray-700 pb-2",children:"ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ã®å…¥åŠ›"}),e.jsxs("div",{className:"p-3 bg-blue-900 border border-blue-700 text-blue-200 rounded-md text-sm",children:[e.jsxs("p",{className:"font-semibold",children:["ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID: ",e.jsx("span",{className:"font-mono break-all",children:h||"N/A"})]}),e.jsx("p",{children:"ï¼ˆã“ã®IDã¯ã‚¢ãƒ—ãƒªå†…ã§ã‚ãªãŸã‚’è­˜åˆ¥ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ï¼‰"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-gray-200 text-lg font-medium mb-2",children:["åå‰ ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",id:"name",value:I,onChange:t=>K(t.target.value),className:"w-full p-3 border border-gray-600 rounded-md bg-gray-700 text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition duration-200",placeholder:"ã‚ãªãŸã®åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"birthDate",className:"block text-gray-200 text-lg font-medium mb-2",children:["ç”Ÿå¹´æœˆæ—¥ ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"date",id:"birthDate",value:N,onChange:t=>J(t.target.value),className:"w-full p-3 border border-gray-600 rounded-md bg-gray-700 text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition duration-200"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"birthTime",className:"block text-gray-200 text-lg font-medium mb-2",children:["å‡ºç”Ÿæ™‚åˆ» ",e.jsx("span",{className:"text-gray-400 text-sm",children:"(ä¸æ˜ãªå ´åˆã¯ç©ºæ¬„ã§OK)"})]}),e.jsx("input",{type:"time",id:"birthTime",value:M,onChange:t=>U(t.target.value),className:"w-full p-3 border border-gray-600 rounded-md bg-gray-700 text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition duration-200"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"birthPlace",className:"block text-gray-200 text-lg font-medium mb-2",children:["å‡ºç”Ÿåœ° ",e.jsx("span",{className:"text-gray-400 text-sm",children:"(ä¾‹: æ±äº¬éƒ½)"})]}),e.jsx("input",{type:"text",id:"birthPlace",value:R,onChange:t=>Y(t.target.value),className:"w-full p-3 border border-gray-600 rounded-md bg-gray-700 text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition duration-200",placeholder:"éƒ½é“åºœçœŒåã¾ãŸã¯å¸‚ç”ºæ‘å"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bloodType",className:"block text-gray-200 text-lg font-medium mb-2",children:"è¡€æ¶²å‹"}),e.jsx("select",{id:"bloodType",value:H,onChange:t=>Q(t.target.value),className:"w-full p-3 border border-gray-600 rounded-md bg-gray-700 text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition duration-200",children:_e.map(t=>e.jsxs("option",{value:t,children:[t,"å‹"]},t))})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"mbtiType",className:"block text-gray-200 text-lg font-medium mb-2",children:["MBTIã‚¿ã‚¤ãƒ— ",e.jsxs("span",{className:"text-gray-400 text-sm",children:["(",e.jsx("a",{href:"[https://www.16personalities.com/ja/](https://www.16personalities.com/ja/)",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"16Personalities"}),"ãªã©ã§è¨ºæ–­å¾Œé¸æŠ)"]})]}),e.jsx("select",{id:"mbtiType",value:L,onChange:t=>q(t.target.value),className:"w-full p-3 border border-gray-600 rounded-md bg-gray-700 text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition duration-200",children:Ie.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx("button",{onClick:Fe,className:"w-full bg-blue-700 text-white p-3 rounded-md font-semibold hover:bg-blue-800 transition duration-300 transform hover:scale-105 shadow-md",children:"å…¥åŠ›æƒ…å ±ã‚’ä¿å­˜"}),Ne&&e.jsx("p",{className:"text-green-400 text-center text-sm mt-2 animate-fade-in",children:"ä¿å­˜ã—ã¾ã—ãŸï¼"}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"fortuneCategory",className:"block text-gray-200 text-lg font-medium mb-2",children:["å ã„ãŸã„ã‚¸ãƒ£ãƒ³ãƒ« ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("select",{id:"fortuneCategory",value:g,onChange:t=>{je(t.target.value),E([]),F("")},className:"w-full p-3 border border-gray-600 rounded-md bg-gray-700 text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition duration-200",children:Ce.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),Ve&&e.jsx("div",{className:"text-center mt-6",children:e.jsx("button",{onClick:Le,disabled:w||D,className:`w-full p-4 rounded-md font-bold text-lg shadow-lg transform transition duration-300 ${w||D?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-indigo-700 text-white hover:bg-indigo-800 hover:scale-105"}`,children:D?"ã‚«ãƒ¼ãƒ‰ã‚’é¸ã‚“ã§ã„ã¾ã™...":"ã‚¿ãƒ­ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã‚’å¼•ã (3æš)"})}),T.length>0&&e.jsxs("div",{className:"mt-6 p-4 border border-purple-600 rounded-md bg-gray-700 text-gray-100 text-center",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-300 mb-4",children:"å¼•ã‹ã‚ŒãŸã‚¿ãƒ­ãƒƒãƒˆã‚«ãƒ¼ãƒ‰"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-4",children:T.map((t,a)=>e.jsxs("div",{className:`tarot-card p-2 text-center text-sm ${t.isReversed?"reversed":""}`,style:{animationDelay:`${.2+a*.5}s`},children:[e.jsx("p",{className:"font-semibold text-purple-200 card-name-display",children:t.name}),e.jsxs("p",{className:"text-gray-400 text-xs",children:["(",t.position,")"]})]},a))}),e.jsx("p",{className:"text-sm text-gray-400 mt-4",children:"ã“ã‚Œã‚‰ã®ã‚«ãƒ¼ãƒ‰ãŒã‚ãªãŸã®å ã„ã«çµ„ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚"})]}),We&&e.jsx("button",{onClick:ze,disabled:w||!g,className:`w-full p-4 rounded-md font-bold text-lg shadow-lg transform transition duration-300 ${w||!g?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-purple-700 text-white hover:bg-purple-800 hover:scale-105"}`,children:w?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner-border animate-spin inline-block w-6 h-6 border-4 rounded-full text-white",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("span",{className:"ml-3",children:"å ã„çµæœã‚’ç”Ÿæˆä¸­..."})]}):T.length>0?"ã‚¿ãƒ­ãƒƒãƒˆã¨AIã§å ã†ï¼":"AIã§å ã†ï¼"})]}),S&&e.jsxs("div",{ref:X,className:"bg-gray-700 border border-purple-700 rounded-xl p-6 sm:p-8 shadow-inner mt-8 animate-fade-in-up pt-4",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-purple-300 mb-4 text-center border-b border-gray-600 pb-2",children:"ã‚ãªãŸã®å ã„çµæœ"}),e.jsx("div",{className:"prose prose-invert lg:prose-lg mx-auto text-gray-100 leading-relaxed break-words",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:S.replace(/\n/g,"<br/>")}})}),e.jsx("div",{className:"text-center mt-8",children:e.jsx("button",{onClick:Be,className:"bg-gradient-to-r from-green-500 to-teal-500 text-white p-3 rounded-md font-semibold hover:from-green-600 hover:to-teal-600 transition duration-300 shadow-xl transform hover:scale-105",children:"åˆ¥ã®é …ç›®ã‚’å ã†"})}),e.jsxs("div",{className:"text-center mt-8 space-x-2 sm:space-x-4 flex flex-wrap justify-center gap-y-3",children:[e.jsxs("button",{onClick:()=>v("twitter"),className:"bg-blue-400 text-white p-3 rounded-md font-semibold hover:bg-blue-500 transition duration-300 shadow-md flex-1 inline-flex items-center justify-center min-w-[150px] sm:min-w-0",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.14L9.35 12.98 2.464 22H0l8.09-10.702L0 2.25h8.322L12.5 7.398 18.244 2.25zM17.272 20l-1.895-2.656-7.147-9.99H5.503L13.181 20H17.272z"})}),"X (Twitter)ã§ã‚·ã‚§ã‚¢"]}),e.jsxs("button",{onClick:()=>v("facebook"),className:"bg-blue-700 text-white p-3 rounded-md font-semibold hover:bg-blue-800 transition duration-300 shadow-md flex-1 inline-flex items-center justify-center min-w-[150px] sm:min-w-0",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M14 13.5h2.5l1-4H14v-2c0-1.03 0-2 .5-2.5h2V7.472s-1.5-.164-2.75-.164c-2.68 0-4.5 1.6-4.5 4.75V13.5H6v4h3.5v6.5h4V17.5h3.5l1-4H14z"})}),"Facebookã§ã‚·ã‚§ã‚¢"]}),e.jsxs("button",{onClick:()=>v("line"),className:"bg-green-500 text-white p-3 rounded-md font-semibold hover:bg-green-600 transition duration-300 shadow-md flex-1 inline-flex items-center justify-center min-w-[150px] sm:min-w-0",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M11.996 2C6.475 2 2 6.477 2 12s4.475 10 9.996 10C17.525 22 22 17.523 22 12S17.525 2 11.996 2zM12 20c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8zM14.28 9.544l-2.072 2.072L9.136 9.544a.75.75 0 00-1.06 1.06l2.072 2.072-2.072 2.072a.75.75 0 001.06 1.06l2.072-2.072 2.072 2.072a.75.75 0 001.06-1.06l-2.072-2.072 2.072-2.072a.75.75 0 00-1.06-1.06z",clipRule:"evenodd"})}),"LINEã§ã‚·ã‚§ã‚¢"]}),e.jsxs("button",{onClick:()=>v("copy"),className:"bg-gray-600 text-white p-3 rounded-md font-semibold hover:bg-gray-700 transition duration-300 shadow-md flex-1 inline-flex items-center justify-center min-w-[150px] sm:min-w-0",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M7 7H5c-1.103 0-2 .897-2 2v10c0 1.103.897 2 2 2h10c1.103 0 2-.897 2-2v-2h2v-8c0-1.103-.897-2-2-2h-8zm10 2h-6V7h6v2zm-2 4h-6V9h6v4z",clipRule:"evenodd"})}),"ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼"]})]})]}),le.length>0&&e.jsxs("div",{ref:pe,className:"mt-12 bg-gray-800 rounded-xl shadow-lg p-6 sm:p-10 border border-gray-700 pt-4",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-200 mb-6 text-center border-b border-gray-700 pb-2",children:"ã‚ãªãŸã®å ã„å±¥æ­´"}),e.jsx("div",{className:"space-y-6",children:le.map(t=>e.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:new Date(t.timestamp.toDate()).toLocaleString()}),e.jsxs("p",{className:"text-lg font-semibold text-purple-300 mb-2",children:["ã‚¸ãƒ£ãƒ³ãƒ«: ",t.fortuneCategory]}),t.tarotCards&&t.tarotCards.length>0&&e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:t.tarotCards.map((a,r)=>e.jsxs("div",{className:`tarot-card-history p-1 text-center text-xs ${a.isReversed?"reversed":""}`,children:[e.jsx("p",{className:"font-bold text-purple-200 card-name-display",children:a.name}),e.jsxs("p",{className:"text-gray-400 text-xs",children:["(",a.position,")"]})]},r))}),e.jsx("div",{className:"prose prose-sm max-w-none text-gray-300",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:t.fortuneResult.replace(/\n/g,"<br/>")}})}),e.jsx("button",{onClick:()=>Me(t),className:"mt-3 text-red-400 hover:text-red-500 text-sm",children:"å‰Šé™¤"})]},t.id))})]}),Se&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg shadow-xl border border-gray-700 text-center",children:[e.jsx("p",{className:"text-xl font-semibold text-gray-100 mb-6",children:"ã“ã®å ã„å±¥æ­´ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx("button",{onClick:$e,className:"bg-red-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-red-700 transition duration-300",children:"ã¯ã„ã€å‰Šé™¤ã—ã¾ã™"}),e.jsx("button",{onClick:Re,className:"bg-gray-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-gray-700 transition duration-300",children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"})]})]})})]})]})}Oe.createRoot(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(st,{})}));
