import{r as n,j as e,c as We}from"./vendor-CCigjdfu.js";import{i as Ke,g as Ue,a as Je,s as Ye,b as qe,o as Qe,d as W,c as ye,e as Ze,f as Ge,h as we,q as et,j as tt,k as rt,l as at}from"./vendor-firebase-CkElGqow.js";(function(){const A=document.createElement("link").relList;if(A&&A.supports&&A.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))$(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&$(p)}).observe(document,{childList:!0,subtree:!0});function g(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function $(u){if(u.ep)return;u.ep=!0;const h=g(u);fetch(u.href,h)}})();function st(){const[K,A]=n.useState(null),[g,$]=n.useState(null),[u,h]=n.useState(null),[p,se]=n.useState(null),[ve,R]=n.useState(!0),[C,U]=n.useState(""),[N,J]=n.useState(""),[M,Y]=n.useState(""),[E,q]=n.useState(""),[L,Q]=n.useState("A"),[H,Z]=n.useState("ISTJ"),[y,je]=n.useState(""),[Ne,ne]=n.useState(!1),[S,D]=n.useState(""),[w,oe]=n.useState(!1),[ie,m]=n.useState(""),[le,de]=n.useState([]),[Se,G]=n.useState(!1),[ce,ee]=n.useState(null),[I,z]=n.useState([]),[P,me]=n.useState(!1),[k,ue]=n.useState(!1),[B,te]=n.useState(0),Ie=20,[re,pe]=n.useState(!1),V=n.useRef(null),X=n.useRef(null),he=n.useRef(null),Te=[{value:"",label:"å ã„ãŸã„ã‚¸ãƒ£ãƒ³ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„"},{value:"ä»Šæ—¥ã®é‹å‹¢",label:"ä»Šæ—¥ã®é‹å‹¢"},{value:"æ‹æ„›é‹",label:"æ‹æ„›é‹"},{value:"ä»•äº‹é‹",label:"ä»•äº‹é‹"},{value:"é‡‘é‹",label:"é‡‘é‹"},{value:"å¥åº·é‹",label:"å¥åº·é‹"},{value:"å¯¾äººé–¢ä¿‚é‹",label:"å¯¾äººé–¢ä¿‚é‹"},{value:"è‡ªå·±æˆé•·",label:"è‡ªå·±æˆé•·"}],Ce=["ISTJ","ISFJ","INFJ","INTJ","ISTP","ISFP","INFP","INTP","ESTP","ESFP","ENFP","ENTP","ESTJ","ESFJ","ENFJ","ENTJ"],ke=["A","B","O","AB"],Fe=[{name:"0 æ„šè€… (The Fool)"},{name:"I é­”è¡“å¸« (The Magician)"},{name:"II å¥³æ•™çš‡ (The High Priestess)"},{name:"III å¥³å¸ (The Empress)"},{name:"IV çš‡å¸ (The Emperor)"},{name:"V æ³•ç‹ (The Hierophant)"},{name:"VI æ‹äºº (The Lovers)"},{name:"VII æˆ¦è»Š (The Chariot)"},{name:"VIII åŠ› (Strength)"},{name:"IX éš è€… (The Hermit)"},{name:"X é‹å‘½ã®è¼ª (Wheel of Fortune)"},{name:"XI æ­£ç¾© (Justice)"},{name:"XII åŠã‚‹ã•ã‚ŒãŸç”· (The Hanged Man)"},{name:"XIII æ­»ç¥ (Death)"},{name:"XIV ç¯€åˆ¶ (Temperance)"},{name:"XV æ‚ªé­” (The Devil)"},{name:"XVI å¡” (The Tower)"},{name:"XVII æ˜Ÿ (The Star)"},{name:"XVIII æœˆ (The Moon)"},{name:"XIX å¤ªé™½ (The Sun)"},{name:"XX å¯©åˆ¤ (Judgement)"},{name:"XXI ä¸–ç•Œ (The World)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®ã‚¨ãƒ¼ã‚¹ (Ace of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®2 (Two of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®3 (Three of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®4 (Four of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®5 (Five of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®6 (Six of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®7 (Seven of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®8 (Eight of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®9 (Nine of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®10 (Ten of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®ãƒšã‚¤ã‚¸ (Page of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®ãƒŠã‚¤ãƒˆ (Knight of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®ã‚¯ã‚¤ãƒ¼ãƒ³ (Queen of Wands)"},{name:"ãƒ¯ãƒ³ãƒ‰ã®ã‚­ãƒ³ã‚° (King of Wands)"},{name:"ã‚«ãƒƒãƒ—ã®ã‚¨ãƒ¼ã‚¹ (Ace of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®2 (Two of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®3 (Three of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®4 (Four of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®5 (Five of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®6 (Six of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®7 (Seven of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®8 (Eight of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®9 (Nine of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®10 (Ten of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®ãƒšã‚¤ã‚¸ (Page of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®ãƒŠã‚¤ãƒˆ (Knight of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®ã‚¯ã‚¤ãƒ¼ãƒ³ (Queen of Cups)"},{name:"ã‚«ãƒƒãƒ—ã®ã‚­ãƒ³ã‚° (King of Cups)"},{name:"ã‚½ãƒ¼ãƒ‰ã®ã‚¨ãƒ¼ã‚¹ (Ace of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®2 (Two of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®3 (Three of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®4 (Four of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®5 (Five of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®6 (Six of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®7 (Seven of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®8 (Eight of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®9 (Nine of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®10 (Ten of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®ãƒšã‚¤ã‚¸ (Page of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®ãƒŠã‚¤ãƒˆ (Knight of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®ã‚¯ã‚¤ãƒ¼ãƒ³ (Queen of Swords)"},{name:"ã‚½ãƒ¼ãƒ‰ã®ã‚­ãƒ³ã‚° (King of Swords)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®ã‚¨ãƒ¼ã‚¹ (Ace of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®2 (Two of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®3 (Three of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®4 (Four of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®5 (Five of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®6 (Six of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®7 (Seven of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®8 (Eight of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®9 (Nine of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®10 (Ten of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®ãƒšã‚¤ã‚¸ (Page of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®ãƒŠã‚¤ãƒˆ (Knight of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®ã‚¯ã‚¤ãƒ¼ãƒ³ (Queen of Pentacles)"},{name:"ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®ã‚­ãƒ³ã‚° (King of Pentacles)"}];n.useEffect(()=>{(async()=>{if(R(!0),m(""),K){R(!1);return}try{const a=Ke({apiKey:"AIzaSyCwe-7ih-aAZMVCrIZ8iZZLucOO3ZvZROQ",authDomain:"myfortuneapp-c7667.firebaseapp.com",projectId:"myfortuneapp-c7667",storageBucket:"myfortuneapp-c7667.firebasestorage.app",messagingSenderId:"770046874662",appId:"1:770046874662:web:115065e3877397d1b082e7",measurementId:"G-NQ701V0GWS"}),o=Ue(a),c=Je(a);A(a),h(o),$(c);let i=!1;if(typeof __initial_auth_token<"u"&&__initial_auth_token)try{await Ye(o,__initial_auth_token),console.log("Firebase: Signed in with custom token from Canvas."),i=!0}catch(s){console.warn("Firebase: Custom token sign-in failed (might be invalid or expired for this project config), attempting anonymous sign-in.",s)}if(!i)try{await qe(o),console.log("Firebase: Signed in anonymously."),i=!0}catch(s){console.error("Firebase: Anonymous sign-in failed. App features might be limited.",s),m("Firebaseèªè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚¢ãƒ—ãƒªã®æ©Ÿèƒ½ãŒåˆ¶é™ã•ã‚Œã¾ã™ã€‚è©³ç´°: "+s.message)}Qe(o,s=>{s?(se(s.uid),console.log("Firebase user ID:",s.uid),_e(c,s.uid),De(c,s.uid)):(se(null),U(""),J(""),Y(""),q(""),Q("A"),Z("ISTJ"),de([]),console.log("No user signed in after auth state change.")),R(!1)})}catch(r){console.error("Firebaseã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åˆæœŸåŒ–ã«è‡´å‘½çš„ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:",r),m("Firebaseã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚¢ãƒ—ãƒªã¯å‹•ä½œã—ã¾ã›ã‚“ã€‚è©³ç´°: "+r.message),R(!1)}})()},[K]);const _e=async(t,r)=>{if(!t||!r)return;const o=W(t,`artifacts/${typeof __app_id<"u"?__app_id:"default-app-id"}/users/${r}/user_data/profile`);try{const c=await Ge(o);if(c.exists()){const i=c.data();U(i.name||""),J(i.birthDate?new Date(i.birthDate.toDate()).toISOString().split("T")[0]:""),Y(i.birthTime||""),q(i.birthPlace||""),Q(i.bloodType||"A"),Z(i.mbtiType||"ISTJ"),pe(i.hasSharedForAdSkip||!1)}}catch(c){console.error("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ:",c),m("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}},Ae=async()=>{if(!g||!p){m("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒèªè¨¼ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚");return}const r=W(g,`artifacts/${typeof __app_id<"u"?__app_id:"default-app-id"}/users/${p}/user_data/profile`);try{await ye(r,{name:C,birthDate:N?new Date(N):null,birthTime:M,birthPlace:E,bloodType:L,mbtiType:H,updatedAt:new Date,hasSharedForAdSkip:re},{merge:!0}),console.log("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œã¾ã—ãŸï¼"),m(""),ne(!0),setTimeout(()=>ne(!1),3e3)}catch(a){console.error("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ:",a),m("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}},fe=async t=>{if(!g||!p){console.error("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒèªè¨¼ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚åºƒå‘Šã‚¹ã‚­ãƒƒãƒ—ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°ã§ãã¾ã›ã‚“ã€‚");return}const a=W(g,`artifacts/${typeof __app_id<"u"?__app_id:"default-app-id"}/users/${p}/user_data/profile`);try{await ye(a,{hasSharedForAdSkip:t},{merge:!0}),pe(t),console.log("åºƒå‘Šã‚¹ã‚­ãƒƒãƒ—ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸ:",t)}catch(o){console.error("åºƒå‘Šã‚¹ã‚­ãƒƒãƒ—ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ:",o)}},De=(t,r)=>{if(!t||!r)return;const o=we(t,`artifacts/${typeof __app_id<"u"?__app_id:"default-app-id"}/users/${r}/fortune_history`),c=et(o,tt("timestamp","desc"));return rt(c,s=>{const f=s.docs.map(x=>({id:x.id,...x.data()}));de(f)},s=>{console.error("å ã„å±¥æ­´ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ:",s),m("å ã„å±¥æ­´ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")})},Pe=async(t,r,a,o=[])=>{if(!g||!p){m("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒèªè¨¼ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚");return}const i=we(g,`artifacts/${typeof __app_id<"u"?__app_id:"default-app-id"}/users/${p}/fortune_history`);try{await at(i,{fortuneCategory:r,inputData:a,fortuneResult:t,tarotCards:o.map(s=>({name:s.name,position:s.position,isReversed:s.isReversed})),timestamp:new Date}),console.log("å ã„çµæœãŒå±¥æ­´ã«ä¿å­˜ã•ã‚Œã¾ã—ãŸï¼")}catch(s){console.error("å ã„çµæœã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ:",s),m("å ã„çµæœã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}},$e=async()=>{if(!g||!p||!ce){m("å‰Šé™¤ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚");return}const t=typeof __app_id<"u"?__app_id:"default-app-id";try{await Ze(W(g,`artifacts/${t}/users/${p}/fortune_history`,ce.id)),console.log("å ã„å±¥æ­´ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸï¼"),m("")}catch(r){console.error("å ã„å±¥æ­´ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ:",r),m("å ã„å±¥æ­´ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}finally{G(!1),ee(null)}},Re=t=>{ee(t),G(!0)},Me=()=>{G(!1),ee(null)},Ee=t=>{if(!t)return null;let r=new Date(t),a=r.getFullYear(),o=r.getMonth()+1,c=r.getDate();const i=b=>{for(;b>9&&b!==11&&b!==22&&b!==33;)b=String(b).split("").reduce((T,O)=>T+parseInt(O),0);return b},s=i(a),f=i(o),x=i(c);return i(s+f+x)},Le=()=>{me(!0),z([]),D("");const t=[...Fe].sort(()=>.5-Math.random()),r=[{card:t[0],position:"éå» (Past)"},{card:t[1],position:"ç¾åœ¨ (Present)"},{card:t[2],position:"æœªæ¥ (Future)"}];let a=[];r.forEach((o,c)=>{setTimeout(()=>{const i=Math.random()<.5;a.push({name:o.card.name,position:o.position,isReversed:i}),z([...a]),c===r.length-1&&me(!1)},500*(c+1))})},He=async(t,r)=>{const a={name:C,birthDate:N,birthTime:M||"ä¸æ˜",birthPlace:E||"ä¸æ˜",bloodType:L,mbtiType:H,fortuneCategory:t},o=Ee(a.birthDate);let s=`å¤ªé™½æ˜Ÿåº§: ${(_=>{const be=new Date(_),l=be.getMonth()+1,d=be.getDate();return l===3&&d>=21||l===4&&d<=19?"ç‰¡ç¾Šåº§ (Aries)":l===4&&d>=20||l===5&&d<=20?"ç‰¡ç‰›åº§ (Taurus)":l===5&&d>=21||l===6&&d<=20?"åŒå­åº§ (Gemini)":l===6&&d>=21||l===7&&d<=22?"èŸ¹åº§ (Cancer)":l===7&&d>=23||l===8&&d<=22?"ç…å­åº§ (Leo)":l===8&&d>=23||l===9&&d<=22?"ä¹™å¥³åº§ (Virgo)":l===9&&d>=23||l===10&&d<=22?"å¤©ç§¤åº§ (Libra)":l===10&&d>=23||l===11&&d<=21?"è åº§ (Scorpio)":l===11&&d>=22||l===12&&d<=21?"å°„æ‰‹åº§ (Sagittarius)":l===12&&d>=22||l===1&&d<=19?"å±±ç¾Šåº§ (Capricorn)":l===1&&d>=20||l===2&&d<=18?"æ°´ç“¶åº§ (Aquarius)":l===2&&d>=19||l===3&&d<=20?"é­šåº§ (Pisces)":"ä¸æ˜"})(a.birthDate)}ã€‚
`;s+=`å‡ºç”Ÿæ™‚åˆ»: ${a.birthTime!=="ä¸æ˜"?a.birthTime:"ä¸æ˜"}ã€‚å‡ºç”Ÿåœ°: ${a.birthPlace!==""?a.birthPlace:"ä¸æ˜"}ã€‚
`,s+=`ã“ã‚Œã‚‰ã®æƒ…å ±ï¼ˆç‰¹ã«æ­£ç¢ºãªå‡ºç”Ÿæ™‚åˆ»ã¨å‡ºç”Ÿåœ°ãŒä¸æ˜ãªå ´åˆã¯ã€å¤ªé™½æ˜Ÿåº§ã¨å¿ƒç†å­¦çš„ç‰¹æ€§ã‚’é‡è¦–ï¼‰ã«åŸºã¥ãã€æœˆæ˜Ÿåº§ã€ã‚¢ã‚»ãƒ³ãƒ€ãƒ³ãƒˆã€ä¸»è¦ãªæƒ‘æ˜Ÿï¼ˆæ°´æ˜Ÿã€é‡‘æ˜Ÿã€ç«æ˜Ÿãªã©ï¼‰ã®ã‚µã‚¤ãƒ³ã‚„ã€ãã‚Œã‚‰ãŒã©ã®ãƒã‚¦ã‚¹ã«ã‚ã‚‹ã‹ï¼ˆä¸€èˆ¬çš„ãªè§£é‡ˆã§è‰¯ã„ï¼‰ã€ãã—ã¦ä¸»è¦ãªã‚¢ã‚¹ãƒšã‚¯ãƒˆï¼ˆä¾‹: ã‚³ãƒ³ã‚¸ãƒ£ãƒ³ã‚¸ãƒ§ãƒ³ã€ã‚ªãƒã‚¸ã‚·ãƒ§ãƒ³ã€ã‚¹ã‚¯ã‚¨ã‚¢ã€ãƒˆãƒ©ã‚¤ãƒ³ã€ã‚»ã‚¯ã‚¹ã‚¿ã‚¤ãƒ«ï¼‰ã®å¯èƒ½æ€§ã‚’å æ˜Ÿè¡“ã®çŸ¥è­˜ã‚’ç·å‹•å“¡ã—ã¦æƒ³åƒã—ã€ã‚ãªãŸã®æ´å¯Ÿã«å«ã‚ã¦ãã ã•ã„ã€‚
`,s+="å…·ä½“çš„ã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®MBTIã‚¿ã‚¤ãƒ—ã‚„è¡€æ¶²å‹ã¨ã®é–¢é€£æ€§ã‚‚è¸ã¾ãˆã€è¡Œå‹•å‚¾å‘ã‚„å†…é¢ä¸–ç•Œã‚’æ·±ãèª­ã¿è§£ã„ã¦ãã ã•ã„ã€‚";let f="";r.length>0&&(f=`
**å¼•ã‹ã‚ŒãŸã‚¿ãƒ­ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã¨ãã®ãƒã‚¸ã‚·ãƒ§ãƒ³:**
`,r.forEach(_=>{f+=`  - ${_.position}: ${_.name} (${_.isReversed?"é€†ä½ç½®":"æ­£ä½ç½®"})
`}),f+=`
ã“ã‚Œã‚‰ã®ã‚«ãƒ¼ãƒ‰ã®æ­£ä½ç½®ãƒ»é€†ä½ç½®ã®æ„å‘³ã¨ã€ãã‚Œã‚‰ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¾çŠ¶ã€èª²é¡Œã€æœªæ¥ã«ã©ã†å½±éŸ¿ã™ã‚‹ã‹ã‚’æ·±ãèª­ã¿è§£ã„ã¦ãã ã•ã„ã€‚ç‰¹ã«ã€ã‚¿ãƒ­ãƒƒãƒˆã¯æ½œåœ¨æ„è­˜ã‚„çŠ¶æ³ã®æµã‚Œã‚’ç¤ºã™ãŸã‚ã€ã“ã®ç‚¹ã‚‚è€ƒæ…®ã«å…¥ã‚Œã¦ãã ã•ã„ã€‚
`);let x=`ã‚ãªãŸã¯çµŒé¨“è±Šå¯Œãªãƒ—ãƒ­ã®å ã„å¸«ã§ã™ã€‚ä»¥ä¸‹ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã€è©³ç´°ãªå æ˜Ÿè¡“ã®æ¦‚å¿µã€æ•°ç§˜è¡“ã®ãƒ‡ãƒ¼ã‚¿ã€MBTIã‚¿ã‚¤ãƒ—ã€è¡€æ¶²å‹${r.length>0?"ã€ãã—ã¦å¼•ã‹ã‚ŒãŸã‚¿ãƒ­ãƒƒãƒˆã‚«ãƒ¼ãƒ‰":""}ã«åŸºã¥ãã€${a.fortuneCategory}ã«ã¤ã„ã¦ã€å…·ä½“çš„ã§ç¤ºå”†ã«å¯Œã‚€ã€å¿ƒç†çµ±è¨ˆã«åŸºã¥ã„ãŸæ·±ã¿ã®ã‚ã‚‹å ã„çµæœã‚’æ—¥æœ¬èªã§ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚å½“ãŸã‚Šéšœã‚Šã®ãªã„è¨€è‘‰ã‚„å®šå‹æ–‡ã¯é¿ã‘ã€æœ¬æ°—ã§å½“ã¦ã«è¡Œãå†…å®¹ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è‡ªå·±ç†è§£ã¨æˆé•·ã‚’ä¿ƒã™ãƒˆãƒ¼ãƒ³ã§è¨˜è¿°ã—ã¦ãã ã•ã„ã€‚

å ã„çµæœã¯Markdownå½¢å¼ã§ã€å¿…ãšå°è¦‹å‡ºã—ï¼ˆ###ï¼‰ã¨æ®µè½ï¼ˆç©ºè¡Œã§åŒºåˆ‡ã‚‹ï¼‰ã‚’ä½¿ç”¨ã—ã¦ã€éå¸¸ã«èª­ã¿ã‚„ã™ãæ§‹æˆã—ã¦ãã ã•ã„ã€‚
**ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«:**
**è¡€æ¶²å‹:** ${a.bloodType}å‹
**MBTIã‚¿ã‚¤ãƒ—:** ${a.mbtiType}

ç‰¹ã«${a.fortuneCategory}ã«é–¢ã™ã‚‹çµæœã‚’å¼·èª¿ã—ã€å¿…è¦ã«å¿œã˜ã¦ãã®ä»–ã®é–¢é€£ã™ã‚‹é‹å‹¢ï¼ˆä¾‹ï¼šç·åˆé‹ã€æ‹æ„›é‹ãªã©ï¼‰ã«ã¤ã„ã¦ã‚‚è¨€åŠã—ã¦ãã ã•ã„ã€‚

---
ãƒ¦ãƒ¼ã‚¶ãƒ¼å: ${a.name}
ç”Ÿå¹´æœˆæ—¥: ${a.birthDate}${a.birthTime!=="ä¸æ˜"?` (${a.birthTime}ç”Ÿ)`:""}
å‡ºç”Ÿåœ°: ${a.birthPlace}

å æ˜Ÿè¡“ãƒ‡ãƒ¼ã‚¿:
  ${s}

æ•°ç§˜è¡“ãƒ‡ãƒ¼ã‚¿:
  ãƒ©ã‚¤ãƒ•ãƒ‘ã‚¹ãƒŠãƒ³ãƒãƒ¼: ${o!==null?o:"è¨ˆç®—ä¸èƒ½"}
  ï¼ˆåå‰ã‹ã‚‰ã®é‹å‘½æ•°ãªã©ã€ã‚ˆã‚Šè©³ç´°ãªæ•°ç§˜è¡“ãƒ‡ãƒ¼ã‚¿ãŒã“ã“ã«å…¥ã‚Šã¾ã™ã€‚ï¼‰
${f}
---

### ${a.fortuneCategory}ã®é‹å‹¢
`;x+=`

### ã¾ã¨ã‚
ã“ã®å ã„çµæœã®æœ€ã‚‚é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã‚’2ã€œ3æ–‡ã§ç°¡æ½”ã«è¦ç´„ã—ã¦ãã ã•ã„ã€‚`;let j=[];j.push({role:"user",parts:[{text:x}]});const F=await(await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:j})})).json();if(F.candidates&&F.candidates.length>0&&F.candidates[0].content&&F.candidates[0].content.parts&&F.candidates[0].content.parts.length>0)return F.candidates[0].content.parts[0].text;throw new Error("AIç”Ÿæˆçµæœã®æ§‹é€ ãŒäºˆæœŸã›ã¬ã‚‚ã®ã§ã—ãŸã€‚")},ze=async()=>{if(!C||!N||!y){m("åå‰ã€ç”Ÿå¹´æœˆæ—¥ã€å ã„ã®ã‚¸ãƒ£ãƒ³ãƒ«ã¯å¿…é ˆã§ã™ã€‚");return}if(!g||!p){m("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒèªè¨¼ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚");return}oe(!0),m(""),D("");try{const t=await He(y,I);D(t),Pe(t,y,{name:C,birthDate:N,birthTime:M,birthPlace:E,bloodType:L,mbtiType:H},I),X.current&&X.current.scrollIntoView({behavior:"smooth"})}catch(t){console.error("å ã„çµæœã®ç”Ÿæˆä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:",t),m("å ã„çµæœã®ç”Ÿæˆä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚")}finally{oe(!1)}},xe=()=>{D(""),z([]),m(""),ue(!1),te(0),V.current&&V.current.scrollIntoView({behavior:"smooth"})},Be=()=>{if(re){console.log("åºƒå‘Šã‚¹ã‚­ãƒƒãƒ—æ¨©é™ã‚ã‚Šã€åºƒå‘Šã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¾ã™ã€‚"),xe();return}ue(!0),te(Ie)};n.useEffect(()=>{let t;return k&&B>0?t=setTimeout(()=>{te(r=>r-1)},1e3):k&&B===0&&xe(),()=>clearTimeout(t)},[k,B,re]);const Ve=t=>{const r="### ã¾ã¨ã‚",a=t.indexOf(r);if(a!==-1){let o=t.substring(a+r.length).trim();const c=o.indexOf("###",1);c!==-1&&(o=o.substring(0,c).trim());let s=o.split(`
`).filter(f=>f.trim()!=="").slice(0,2).join(" ").trim();return s=s.replace(/#+\s*/g,"").replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*\*/g,"$1"),s.length>80&&(s=s.substring(0,80)+"..."),s}return""},v=t=>{if(!S){m("ã‚·ã‚§ã‚¢ã™ã‚‹å ã„çµæœãŒã‚ã‚Šã¾ã›ã‚“ã€‚");return}const r=Ve(S),a=`é©šæ„•ã®çš„ä¸­ç‡ï¼ç§ã®AIå ã„ã¯ã‚³ãƒ¬ğŸ”®âœ¨

ã‚¸ãƒ£ãƒ³ãƒ«: ${y}`,o=r?`
ã€ã¾ã¨ã‚ã€‘${r}`:"",c="#AIå ã„ #æœ¬æ ¼å ã„";let i=`${a}${o}
${c}`;const f=280-23;i.length>f&&(i=i.substring(0,f-3)+"...");const x=window.location.href;let j="";switch(t){case"twitter":j=`https://twitter.com/intent/tweet?text=${encodeURIComponent(i)}&url=${encodeURIComponent(x)}`;break;case"facebook":j=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(x)}&quote=${encodeURIComponent(a+o)}`;break;case"line":j=`https://line.me/R/share?text=${encodeURIComponent(a+o+`
`+x+`
`+tags)}`;break;case"copy":const b=`ğŸ”®âœ¨ å­¦è¡“çš„AIå ã„çµæœ âœ¨ğŸ”®

ã‚¸ãƒ£ãƒ³ãƒ«: ${y}

${S}

${c}
${x}`,T=document.createElement("textarea");T.value=b,document.body.appendChild(T),T.select();try{document.execCommand("copy"),alert("å ã„çµæœã®ãƒªãƒ³ã‚¯ã¨å†…å®¹ãŒã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã—ãŸï¼")}catch(O){console.error("Failed to copy: ",O),alert("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸã€‚")}document.body.removeChild(T),k&&fe(!0);return;default:return}window.open(j,"_blank"),k&&fe(!0)},ae=t=>{t.current&&t.current.scrollIntoView({behavior:"smooth"})},ge=C&&N&&y,Xe=ge&&!w&&I.length===0&&!P&&S==="",Oe=ge&&!P&&!w&&I.length>0&&S==="";return ve?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"spinner-border animate-spin inline-block w-8 h-8 border-4 rounded-full text-purple-400",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"text-xl font-semibold text-gray-300 mt-4",children:"ã‚¢ãƒ—ãƒªã‚’åˆæœŸåŒ–ä¸­..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-purple-950 p-4 sm:p-8 font-inter",children:[e.jsx("style",{children:`
                @keyframes fade-in {
                    from { opacity: 0; transform: translateY(-10px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                @keyframes slide-down {
                    from { opacity: 0; transform: translateY(-20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                @keyframes fade-in-up {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                .animate-fade-in { animation: fade-in 0.8s ease-out forwards; }
                .animate-slide-down { animation: slide-down 0.5s ease-out forwards; }
                .animate-fade-in-up { animation: fade-in-up 0.6s ease-out forwards; }

                /* Spinner styles */
                .spinner-border {
                    border-top-color: currentColor;
                    border-right-color: transparent;
                    border-bottom-color: transparent;
                    border-left-color: currentColor;
                }
                .tarot-card {
                    width: 80px; /* Adjust size as needed */
                    height: 120px; /* Adjust size as needed */
                    border: 2px solid #a78bfa; /* Purple border */
                    border-radius: 8px;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    background-color: #2d2d3a;
                    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
                    flex-shrink: 0; /* Prevent shrinking in flex container */
                    opacity: 0; /* Hidden by default for animation */
                    transform: translateY(20px) rotateX(90deg); /* Start off-screen and rotated */
                    animation: card-reveal 0.5s ease-out forwards; /* Apply reveal animation */
                    transition: transform 0.3s ease-in-out; /* Smooth transition for reversal */
                }
                .tarot-card.reversed { /* Apply to the whole card container for reversal */
                    transform: rotate(180deg);
                }
                /* Ensure history cards also respect reversal */
                .tarot-card-history { /* Base style for history cards to not inherit reveal animation */
                    width: 60px;
                    height: 90px;
                    border: 2px solid #a78bfa;
                    border-radius: 8px;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    background-color: #2d2d3a;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
                    flex-shrink: 0;
                    opacity: 1; /* Always visible */
                    transform: none; /* No initial transform */
                    transition: transform 0.3s ease-in-out; /* Smooth transition for reversal */
                }
                .tarot-card-history.reversed {
                    transform: rotate(180deg);
                }

                .tarot-card .card-name-display { /* Specific class for the card name inside */
                    text-align: center;
                    font-size: 0.8rem; /* Smaller font for better fit */
                    line-height: 1.1;
                    padding: 0 2px; /* Small padding */
                    word-break: break-word; /* Allow breaking words */
                    white-space: normal; /* Allow normal wrapping */
                }
                .tarot-card-history .card-name-display {
                    font-size: 0.6rem; /* Even smaller for history */
                    line-height: 1;
                }
                
                @keyframes card-reveal {
                    0% {
                        opacity: 0;
                        transform: translateY(20px) rotateX(90deg);
                    }
                    100% {
                        opacity: 1;
                        transform: translateY(0) rotateX(0deg);
                    }
                }

                /* New loading animation styles - Crystal Ball */
                .loading-overlay {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background-color: rgba(0, 0, 0, 0.9); /* Darker overlay */
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    justify-content: center;
                    z-index: 9999;
                    color: white;
                    font-size: 1.5rem;
                }

                .crystal-ball {
                    width: 100px;
                    height: 100px;
                    background: radial-gradient(circle at 30% 30%, #a78bfa, #6d28d9); /* Inner glow */
                    border-radius: 50%;
                    position: relative;
                    box-shadow: 0 0 30px #d8b4fe, inset 0 0 15px #e9d5ff; /* Outer glow and inner light */
                    animation: pulse-glow 2s infinite alternate ease-in-out;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 3rem;
                    margin-bottom: 2rem;
                }

                .crystal-ball::before {
                    content: '';
                    position: absolute;
                    top: 10%;
                    left: 10%;
                    width: 80%;
                    height: 80%;
                    border-radius: 50%;
                    background: radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0) 70%);
                    filter: blur(5px);
                }

                @keyframes pulse-glow {
                    0% {
                        box-shadow: 0 0 30px #d8b4fe, inset 0 0 15px #e9d5ff;
                        transform: scale(1);
                    }
                    100% {
                        box-shadow: 0 0 45px #d8b4fe, inset 0 0 20px #e9d5ff;
                        transform: scale(1.05);
                    }
                }
            `}),w&&e.jsxs("div",{className:"loading-overlay",children:[e.jsx("div",{className:"crystal-ball",children:e.jsx("span",{role:"img","aria-label":"crystal ball",children:"ğŸ”®"})}),e.jsx("p",{className:"text-xl font-semibold text-gray-300 loading-text",children:"é‹å‘½ã®å°ãã‚’ç”Ÿæˆä¸­..."}),e.jsx("p",{className:"text-md text-gray-400 mt-2 loading-text",children:"AIãŒã‚ãªãŸã®ãƒ‡ãƒ¼ã‚¿ã‚’æ·±ãèª­ã¿è§£ã„ã¦ã„ã¾ã™ã€‚"})]}),k&&e.jsx("div",{className:"loading-overlay",children:e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gray-900 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"åºƒå‘Šè¡¨ç¤ºä¸­"}),e.jsxs("p",{className:"text-xl mb-8",children:["æ¬¡ã®å ã„ã¾ã§ã‚ã¨ ",B," ç§’..."]}),e.jsx("p",{className:"text-xl font-bold text-center text-yellow-300 mb-4 animate-pulse",children:"é‹å‘½ã®äººã«ä¼šãˆã‚‹ã‹ã‚‚â£ä¼šå“¡æ•°1500ä¸‡äººã®å‡ºä¼šã„ãƒãƒƒãƒãƒ³ã‚°ã‚µã‚¤ãƒˆâ€¼"}),e.jsxs("div",{className:"my-4 flex justify-center items-center",style:{width:"320px",height:"280px",overflow:"hidden"},children:[e.jsxs("a",{href:"https://px.a8.net/svt/ejp?a8mat=457HK0+6TW1MA+22QA+I47XT",rel:"nofollow",target:"_blank",children:[" ",e.jsx("img",{border:"0",width:"320",height:"280",alt:"ç¾å®¹ç³»åºƒå‘Š",src:"https://www28.a8.net/svt/bgt?aid=250612128413&wid=001&eno=01&mid=s00000009685003043000&mc=1"})]}),e.jsx("img",{border:"0",width:"1",height:"1",src:"https://www12.a8.net/0.gif?a8mat=457HK0+6TW1MA+22QA+I47XT",alt:"ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ãƒ”ã‚¯ã‚»ãƒ«",style:{display:"none"}})," "]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"SNSã§ã‚·ã‚§ã‚¢ã™ã‚‹ã¨ã€åºƒå‘Šã‚’ã‚¹ã‚­ãƒƒãƒ—ã§ãã¾ã™ï¼"}),e.jsxs("div",{className:"text-center mt-8 space-x-1 sm:space-x-2 flex flex-wrap justify-center gap-y-2",children:[" ",e.jsxs("button",{onClick:()=>v("twitter"),className:"bg-blue-400 text-white p-2 rounded-md font-semibold text-sm hover:bg-blue-500 transition duration-300 shadow-md flex items-center justify-center min-w-[100px]",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.14L9.35 12.98 2.464 22H0l8.09-10.702L0 2.25h8.322L12.5 7.398 18.244 2.25zM17.272 20l-1.895-2.656-7.147-9.99H5.503L13.181 20H17.272z"})}),"X (Twitter)"]}),e.jsxs("button",{onClick:()=>v("facebook"),className:"bg-blue-700 text-white p-2 rounded-md font-semibold text-sm hover:bg-blue-800 transition duration-300 shadow-md flex items-center justify-center min-w-[100px]",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M14 13.5h2.5l1-4H14v-2c0-1.03 0-2 .5-2.5h2V7.472s-1.5-.164-2.75-.164c-2.68 0-4.5 1.6-4.5 4.75V13.5H6v4h3.5v6.5h4V17.5h3.5l1-4H14z"})}),"Facebook"]}),e.jsxs("button",{onClick:()=>v("line"),className:"bg-green-500 text-white p-2 rounded-md font-semibold text-sm hover:bg-green-600 transition duration-300 shadow-md flex items-center justify-center min-w-[100px]",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M11.996 2C6.475 2 2 6.477 2 12s4.475 10 9.996 10C17.525 22 22 17.523 22 12S17.525 2 11.996 2zM12 20c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8zM14.28 9.544l-2.072 2.072L9.136 9.544a.75.75 0 00-1.06 1.06l2.072 2.072-2.072 2.072a.75.75 0 001.06 1.06l2.072-2.072 2.072 2.072a.75.75 0 001.06-1.06l-2.072-2.072 2.072-2.072a.75.75 0 00-1.06-1.06z",clipRule:"evenodd"})}),"LINE"]}),e.jsxs("button",{onClick:()=>v("copy"),className:"bg-gray-600 text-white p-2 rounded-md font-semibold text-sm hover:bg-gray-700 transition duration-300 shadow-md flex items-center justify-center min-w-[100px]",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M7 7H5c-1.103 0-2 .897-2 2v10c0 1.103.897 2 2 2h10c1.103 0 2-.897 2-2v-2h2v-8c0-1.103-.897-2-2-2h-8zm10 2h-6V7h6v2zm-2 4h-6V9h6v4z",clipRule:"evenodd"})}),"ã‚³ãƒ”ãƒ¼"]})]})]})}),e.jsxs("div",{className:"fixed top-0 left-0 right-0 bg-gray-900 bg-opacity-80 p-3 z-40 shadow-lg flex justify-center space-x-4 rounded-b-lg",children:[e.jsx("button",{onClick:()=>ae(V),className:"text-gray-200 hover:text-purple-400 font-semibold text-sm sm:text-base px-3 py-2 rounded-md transition duration-200",children:"å…¥åŠ›"}),e.jsx("button",{onClick:()=>ae(X),className:"text-gray-200 hover:text-purple-400 font-semibold text-sm sm:text-base px-3 py-2 rounded-md transition duration-200",children:"çµæœ"}),e.jsx("button",{onClick:()=>ae(he),className:"text-gray-200 hover:text-purple-400 font-semibold text-sm sm:text-base px-3 py-2 rounded-md transition duration-200",children:"å±¥æ­´"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto bg-gray-800 rounded-xl shadow-lg p-6 sm:p-10 border border-purple-700 mt-16",children:[" ",e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"h-20 w-20 mx-auto bg-purple-600 rounded-full flex items-center justify-center mb-4 shadow-xl",children:e.jsx("span",{className:"text-white text-3xl font-bold",children:"ğŸ”®"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-purple-300 mb-6 animate-fade-in",children:"å­¦è¡“çš„AIå ã„ï¼šã‚ãªãŸã®é‹å‘½ã‚’æ·±ãèª­ã¿è§£ã"})]}),ie&&e.jsxs("div",{className:"bg-red-900 border border-red-700 text-red-300 px-4 py-3 rounded-md mb-6 animate-slide-down",role:"alert",children:[e.jsx("p",{className:"font-bold",children:"ã‚¨ãƒ©ãƒ¼:"}),e.jsx("p",{children:ie})]}),e.jsxs("div",{className:"mb-8 p-4 bg-yellow-900 border border-yellow-700 text-yellow-200 rounded-md text-sm",children:[e.jsx("p",{className:"font-semibold mb-2",children:"ã€ã“ã‚Œã¾ã§ã«ãªã„ç©¶æ¥µã®å ã„ä½“é¨“ã¸ï¼ã€‘"}),e.jsx("p",{children:"ã“ã®ã‚¢ãƒ—ãƒªã¯ã€**å¿ƒç†çµ±è¨ˆå­¦**ã€**ä¼çµ±çš„ãªå è¡“ï¼ˆå æ˜Ÿè¡“ã€æ•°ç§˜è¡“ã€ã‚¿ãƒ­ãƒƒãƒˆï¼‰**ã€ãã—ã¦**æœ€å…ˆç«¯ã®AIæŠ€è¡“**ã‚’ç·åˆçš„ã«çµ„ã¿åˆã‚ã›ãŸã€ã¾ã•ã«ã€Œæœ€å¼·ã€ã®å ã„ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã‚ãªãŸã®åå‰ã€ç”Ÿå¹´æœˆæ—¥ã€è¡€æ¶²å‹ã€MBTIã‚¿ã‚¤ãƒ—ã¨ã„ã£ãŸãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ã€AIãŒæ·±å±¤ã‚’åˆ†æã—ã€å½“ãŸã‚Šéšœã‚Šã®ãªã„è¨€è‘‰ã§ã¯ãªã„ã€æœ¬å½“ã«ã‚ãªãŸã«éŸ¿ãç¤ºå”†ã«å¯Œã‚“ã æ´å¯Ÿã‚’ãŠå±Šã‘ã—ã¾ã™ã€‚ã‚ãªãŸã®è‡ªå·±ç†è§£ã‚’æ·±ã‚ã€æœªæ¥ã‚’åˆ‡ã‚Šé–‹ããŸã‚ã®ç¾…é‡ç›¤ã¨ã—ã¦ã”æ´»ç”¨ãã ã•ã„ã€‚MBTIã‚¿ã‚¤ãƒ—ã¯è‡ªå·±ç†è§£ã«éå¸¸ã«æœ‰ç”¨ã§ã™ãŒã€ç§‘å­¦çš„å¦¥å½“æ€§ã«ã¯é™å®šçš„ãªå´é¢ãŒã‚ã‚‹ã“ã¨ã‚’ã”ç†è§£ã®ä¸Šã€ãŠæ¥½ã—ã¿ãã ã•ã„ã€‚"})]}),e.jsxs("div",{ref:V,className:"space-y-6 mb-8 pt-4",children:[" ",e.jsx("h2",{className:"text-2xl font-bold text-gray-200 mb-4 border-b border-gray-700 pb-2",children:"ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ã®å…¥åŠ›"}),e.jsxs("div",{className:"p-3 bg-blue-900 border border-blue-700 text-blue-200 rounded-md text-sm",children:[e.jsxs("p",{className:"font-semibold",children:["ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ID: ",e.jsx("span",{className:"font-mono break-all",children:p||"N/A"})]}),e.jsx("p",{children:"ï¼ˆã“ã®IDã¯ã‚¢ãƒ—ãƒªå†…ã§ã‚ãªãŸã‚’è­˜åˆ¥ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ï¼‰"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-gray-200 text-lg font-medium mb-2",children:["åå‰ ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"text",id:"name",value:C,onChange:t=>U(t.target.value),className:"w-full p-3 border border-gray-600 rounded-md bg-gray-700 text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition duration-200",placeholder:"ã‚ãªãŸã®åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"birthDate",className:"block text-gray-200 text-lg font-medium mb-2",children:["ç”Ÿå¹´æœˆæ—¥ ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("input",{type:"date",id:"birthDate",value:N,onChange:t=>J(t.target.value),className:"w-full p-3 border border-gray-600 rounded-md bg-gray-700 text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition duration-200"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"birthTime",className:"block text-gray-200 text-lg font-medium mb-2",children:["å‡ºç”Ÿæ™‚åˆ» ",e.jsx("span",{className:"text-gray-400 text-sm",children:"(ä¸æ˜ãªå ´åˆã¯ç©ºæ¬„ã§OK)"})]}),e.jsx("input",{type:"time",id:"birthTime",value:M,onChange:t=>Y(t.target.value),className:"w-full p-3 border border-gray-600 rounded-md bg-gray-700 text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition duration-200"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"birthPlace",className:"block text-gray-200 text-lg font-medium mb-2",children:["å‡ºç”Ÿåœ° ",e.jsx("span",{className:"text-gray-400 text-sm",children:"(ä¾‹: æ±äº¬éƒ½)"})]}),e.jsx("input",{type:"text",id:"birthPlace",value:E,onChange:t=>q(t.target.value),className:"w-full p-3 border border-gray-600 rounded-md bg-gray-700 text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition duration-200",placeholder:"éƒ½é“åºœçœŒåã¾ãŸã¯å¸‚ç”ºæ‘å"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bloodType",className:"block text-gray-200 text-lg font-medium mb-2",children:"è¡€æ¶²å‹"}),e.jsx("select",{id:"bloodType",value:L,onChange:t=>Q(t.target.value),className:"w-full p-3 border border-gray-600 rounded-md bg-gray-700 text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition duration-200",children:ke.map(t=>e.jsxs("option",{value:t,children:[t,"å‹"]},t))})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"mbtiType",className:"block text-gray-200 text-lg font-medium mb-2",children:["MBTIã‚¿ã‚¤ãƒ— ",e.jsxs("span",{className:"text-gray-400 text-sm",children:["(",e.jsx("a",{href:"https://www.16personalities.com/ja/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:underline",children:"16Personalities"}),"ãªã©ã§è¨ºæ–­å¾Œé¸æŠ)"]})]}),e.jsx("select",{id:"mbtiType",value:H,onChange:t=>Z(t.target.value),className:"w-full p-3 border border-gray-600 rounded-md bg-gray-700 text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition duration-200",children:Ce.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsx("button",{onClick:Ae,className:"w-full bg-blue-700 text-white p-3 rounded-md font-semibold hover:bg-blue-800 transition duration-300 transform hover:scale-105 shadow-md",children:"å…¥åŠ›æƒ…å ±ã‚’ä¿å­˜"}),Ne&&e.jsx("p",{className:"text-green-400 text-center text-sm mt-2 animate-fade-in",children:"ä¿å­˜ã—ã¾ã—ãŸï¼"}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"fortuneCategory",className:"block text-gray-200 text-lg font-medium mb-2",children:["å ã„ãŸã„ã‚¸ãƒ£ãƒ³ãƒ« ",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsx("select",{id:"fortuneCategory",value:y,onChange:t=>{je(t.target.value),z([]),D("")},className:"w-full p-3 border border-gray-600 rounded-md bg-gray-700 text-gray-100 focus:ring-purple-500 focus:border-purple-500 transition duration-200",children:Te.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),Xe&&e.jsx("div",{className:"text-center mt-6",children:e.jsx("button",{onClick:Le,disabled:w||P,className:`w-full p-4 rounded-md font-bold text-lg shadow-lg transform transition duration-300 ${w||P?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-indigo-700 text-white hover:bg-indigo-800 hover:scale-105"}`,children:P?"ã‚«ãƒ¼ãƒ‰ã‚’é¸ã‚“ã§ã„ã¾ã™...":"ã‚¿ãƒ­ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã‚’å¼•ã (3æš)"})}),I.length>0&&e.jsxs("div",{className:"mt-6 p-4 border border-purple-600 rounded-md bg-gray-700 text-gray-100 text-center",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-300 mb-4",children:"å¼•ã‹ã‚ŒãŸã‚¿ãƒ­ãƒƒãƒˆã‚«ãƒ¼ãƒ‰"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-4",children:I.map((t,r)=>e.jsxs("div",{className:`tarot-card p-2 text-center text-sm ${t.isReversed?"reversed":""}`,style:{animationDelay:`${.2+r*.5}s`},children:[e.jsx("p",{className:"font-semibold text-purple-200 card-name-display",children:t.name}),e.jsxs("p",{className:"text-gray-400 text-xs",children:["(",t.position,")"]})]},r))}),e.jsx("p",{className:"text-sm text-gray-400 mt-4",children:"ã“ã‚Œã‚‰ã®ã‚«ãƒ¼ãƒ‰ãŒã‚ãªãŸã®å ã„ã«çµ„ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚"})]}),Oe&&e.jsx("button",{onClick:ze,disabled:w||!y,className:`w-full p-4 rounded-md font-bold text-lg shadow-lg transform transition duration-300 ${w||!y?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-purple-700 text-white hover:bg-purple-800 hover:scale-105"}`,children:w?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner-border animate-spin inline-block w-6 h-6 border-4 rounded-full text-white",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("span",{className:"ml-3",children:"å ã„çµæœã‚’ç”Ÿæˆä¸­..."})]}):I.length>0?"ã‚¿ãƒ­ãƒƒãƒˆã¨AIã§å ã†ï¼":"AIã§å ã†ï¼"})]}),S&&e.jsxs("div",{ref:X,className:"bg-gray-700 border border-purple-700 rounded-xl p-6 sm:p-8 shadow-inner mt-8 animate-fade-in-up pt-4",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-purple-300 mb-4 text-center border-b border-gray-600 pb-2",children:"ã‚ãªãŸã®å ã„çµæœ"}),e.jsx("div",{className:"prose prose-invert lg:prose-lg mx-auto text-gray-100 leading-relaxed break-words",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:S.replace(/\n/g,"<br/>")}})}),e.jsx("div",{className:"text-center mt-8",children:e.jsx("button",{onClick:Be,className:"bg-gradient-to-r from-green-500 to-teal-500 text-white p-3 rounded-md font-semibold hover:from-green-600 hover:to-teal-600 transition duration-300 shadow-xl transform hover:scale-105",children:"åˆ¥ã®é …ç›®ã‚’å ã†"})}),e.jsxs("div",{className:"text-center mt-8 space-x-2 sm:space-x-4 flex flex-wrap justify-center gap-y-3",children:[e.jsxs("button",{onClick:()=>v("twitter"),className:"bg-blue-400 text-white p-3 rounded-md font-semibold hover:bg-blue-500 transition duration-300 shadow-md flex-1 inline-flex items-center justify-center min-w-[150px] sm:min-w-0",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.14L9.35 12.98 2.464 22H0l8.09-10.702L0 2.25h8.322L12.5 7.398 18.244 2.25zM17.272 20l-1.895-2.656-7.147-9.99H5.503L13.181 20H17.272z"})}),"X (Twitter)ã§ã‚·ã‚§ã‚¢"]}),e.jsxs("button",{onClick:()=>v("facebook"),className:"bg-blue-700 text-white p-3 rounded-md font-semibold hover:bg-blue-800 transition duration-300 shadow-md flex-1 inline-flex items-center justify-center min-w-[150px] sm:min-w-0",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M14 13.5h2.5l1-4H14v-2c0-1.03 0-2 .5-2.5h2V7.472s-1.5-.164-2.75-.164c-2.68 0-4.5 1.6-4.5 4.75V13.5H6v4h3.5v6.5h4V17.5h3.5l1-4H14z"})}),"Facebookã§ã‚·ã‚§ã‚¢"]}),e.jsxs("button",{onClick:()=>v("line"),className:"bg-green-500 text-white p-3 rounded-md font-semibold hover:bg-green-600 transition duration-300 shadow-md flex-1 inline-flex items-center justify-center min-w-[150px] sm:min-w-0",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M11.996 2C6.475 2 2 6.477 2 12s4.475 10 9.996 10C17.525 22 22 17.523 22 12S17.525 2 11.996 2zM12 20c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8zM14.28 9.544l-2.072 2.072L9.136 9.544a.75.75 0 00-1.06 1.06l2.072 2.072-2.072 2.072a.75.75 0 001.06 1.06l2.072-2.072 2.072 2.072a.75.75 0 001.06-1.06l-2.072-2.072 2.072-2.072a.75.75 0 00-1.06-1.06z",clipRule:"evenodd"})}),"LINEã§ã‚·ã‚§ã‚¢"]}),e.jsxs("button",{onClick:()=>v("copy"),className:"bg-gray-600 text-white p-3 rounded-md font-semibold hover:bg-gray-700 transition duration-300 shadow-md flex-1 inline-flex items-center justify-center min-w-[150px] sm:min-w-0",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:e.jsx("path",{d:"M7 7H5c-1.103 0-2 .897-2 2v10c0 1.103.897 2 2 2h10c1.103 0 2-.897 2-2v-2h2v-8c0-1.103-.897-2-2-2h-8zm10 2h-6V7h6v2zm-2 4h-6V9h6v4z",clipRule:"evenodd"})}),"ã‚³ãƒ”ãƒ¼"]})]})]}),le.length>0&&e.jsxs("div",{ref:he,className:"mt-12 bg-gray-800 rounded-xl shadow-lg p-6 sm:p-10 border border-gray-700 pt-4",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-200 mb-6 text-center border-b border-gray-700 pb-2",children:"ã‚ãªãŸã®å ã„å±¥æ­´"}),e.jsx("div",{className:"space-y-6",children:le.map(t=>e.jsxs("div",{className:"bg-gray-700 border border-gray-600 rounded-lg p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:new Date(t.timestamp.toDate()).toLocaleString()}),e.jsxs("p",{className:"text-lg font-semibold text-purple-300 mb-2",children:["ã‚¸ãƒ£ãƒ³ãƒ«: ",t.fortuneCategory]}),t.tarotCards&&t.tarotCards.length>0&&e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-4",children:t.tarotCards.map((r,a)=>e.jsxs("div",{className:`tarot-card-history p-1 text-center text-xs ${r.isReversed?"reversed":""}`,children:[e.jsx("p",{className:"font-bold text-purple-200 card-name-display",children:r.name}),e.jsxs("p",{className:"text-gray-400 text-xs",children:["(",r.position,")"]})]},a))}),e.jsx("div",{className:"prose prose-sm max-w-none text-gray-300",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:t.fortuneResult.replace(/\n/g,"<br/>")}})}),e.jsx("button",{onClick:()=>Re(t),className:"mt-3 text-red-400 hover:text-red-500 text-sm",children:"å‰Šé™¤"})]},t.id))})]}),Se&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-800 p-8 rounded-lg shadow-xl border border-gray-700 text-center",children:[e.jsx("p",{className:"text-xl font-semibold text-gray-100 mb-6",children:"ã“ã®å ã„å±¥æ­´ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx("button",{onClick:$e,className:"bg-red-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-red-700 transition duration-300",children:"ã¯ã„ã€å‰Šé™¤ã—ã¾ã™"}),e.jsx("button",{onClick:Me,className:"bg-gray-600 text-white px-6 py-2 rounded-md font-semibold hover:bg-gray-700 transition duration-300",children:"ã‚­ãƒ£ãƒ³ã‚»ãƒ«"})]})]})})]})]})}We(document.getElementById("root")).render(e.jsx(n.StrictMode,{children:e.jsx(st,{})}));
